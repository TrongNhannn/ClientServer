{"ast":null,"code":"var _jsxFileName = \"D:\\\\DIPE\\\\APP\\\\src\\\\cpn\\\\client\\\\version\\\\methods\\\\post.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { v4 as uuidv4 } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default _s(props => {\n  _s();\n  const {\n    version,\n    project_id,\n    tables,\n    closeDialog\n  } = props;\n  const dispatch = useDispatch();\n  const {\n    proxy,\n    unique_string,\n    collection,\n    collections\n  } = useSelector(state => state);\n  const {\n    addApiToCollection,\n    auto_id\n  } = useSelector(state => state.functions);\n  const [height, setHeight] = useState(0);\n  const [tablesHeight, setTablesHeight] = useState(0);\n  const [filter, setFilter] = useState([]);\n  const [filtedTables, setFiltedTables] = useState([]);\n  const [selectedTables, setSelectedTables] = useState([]);\n  const [params, setParams] = useState([]);\n  const [filtedFields, setFiltedFields] = useState([]);\n  const [selectedFields, setSelectedFields] = useState([]);\n  const [customFields, setCustomFields] = useState([]);\n  const criterias = [{\n    id: 1,\n    label: \"GET\",\n    value: \"get\"\n  }, {\n    id: 2,\n    label: \"POST\",\n    value: \"post\"\n  }, {\n    id: 3,\n    label: \"PUT\",\n    value: \"put\"\n  }, {\n    id: 4,\n    label: \"DELETE\",\n    value: \"delete\"\n  }];\n  const [drop, setDrop] = useState(false);\n  const [api, setApi] = useState({\n    type: criterias[1],\n    url: {},\n    name: \"API mới nè\"\n  });\n  const createUniqueURL = baseURL => {\n    const uniqueID = uuidv4().replaceAll(\"-\", '');\n    return {\n      url: `/api/${project_id}/${version.version_id}/${uniqueID}`,\n      proxy,\n      id_str: uniqueID\n    };\n  };\n  useEffect(() => {\n    setApi({\n      ...api,\n      url: createUniqueURL()\n    });\n  }, [version]);\n  useEffect(() => {\n    setFiltedTables(tables);\n  }, [tables]);\n  const dropTables = () => {\n    setDrop(!drop);\n  };\n  const submitApi = () => {\n    const url = {\n      ...api.url,\n      url: api.url.url + generateParams().url,\n      params\n    };\n    const submitBody = {\n      ...api,\n      tables: selectedTables,\n      fields: selectedFields,\n      collection,\n      url,\n      status: false,\n      fullurl: api.url.proxy + url.url,\n      customFields\n    };\n    fetch(`${proxy}/api/${unique_string}/apis/api`, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        data: submitBody\n      })\n    }).then(res => res.json()).then(res => {\n      closeDialog();\n      delete submitBody.collection;\n      addApiToCollection(collections, collection, submitBody);\n    });\n  };\n  const doesFieldBelongToTable = (field, table) => {\n    const {\n      fields\n    } = table;\n    if (fields != undefined) {\n      const existed = fields.filter(f => f.field_id === field.field_id);\n      if (existed != 0) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  const sortTableBasedOnKey = tables => {\n    const pkOnly = tables.filter(tb => {\n      const {\n        constraint\n      } = tb;\n      const fk = constraint.filter(c => c.constraint_type == \"fk\");\n      return fk.length > 0 ? false : true;\n    });\n    const fkOnly = tables.filter(tb => {\n      const {\n        constraint\n      } = tb;\n      if (constraint && constraint.length > 0 && constraint.length % 2 == 0) {\n        const fk = constraint.filter(c => c.constraint_type == \"fk\");\n        const pk = constraint.filter(c => c.constraint_type == \"fk\");\n        let valid = true;\n        for (let i = 0; i < fk.length; i++) {\n          const key = fk[i];\n          const corespondKey = pk.filter(k => k.field_id == key.field_id);\n          if (corespondKey.length == 0) {\n            valid = false;\n          }\n        }\n        return valid;\n      } else {\n        return false;\n      }\n    });\n    const pkOnlyAndfkOnly = [...pkOnly, ...fkOnly];\n    const mixedKey = tables.filter(tb => pkOnlyAndfkOnly.indexOf(tb) == -1);\n    console.log(\"\\n\");\n    console.log(pkOnly);\n    console.log(fkOnly);\n    console.log(mixedKey);\n    return [...pkOnly, ...mixedKey, ...fkOnly];\n  };\n  const filterAdd = table => {\n    const {\n      constraint\n    } = table;\n    const pk = constraint.filter(c => c.constraint_type == \"pk\");\n    let isConflict = false;\n    for (let i = 0; i < pk.length; i++) {\n      const key = pk[i];\n      if (fkExisted(key)) {\n        isConflict = true;\n      }\n    }\n    if (!isConflict) {\n      const newFiltedTables = filtedTables.filter(tb => tb.table_id != table.table_id);\n      const newSelectedTables = sortTableBasedOnKey([...selectedTables, table]);\n      setSelectedTables(newSelectedTables);\n      setFiltedTables(newFiltedTables);\n      setFiltedFields([...filtedFields, ...table.fields]);\n    } else {\n      alert(\"Không thể chọn bảng này vì khóa ngoại của nó đã tồn tại trong danh sách được chọn!\");\n    }\n  };\n  const filterRemove = table => {\n    // const newSelectedTables = selectedTables.filter( tb => tb.table_id != table.table_id );\n    // setFiltedTables([ ...filtedTables, table ])\n    // setSelectedTables(newSelectedTables)\n    // const newFiltedFields = filtedFields.filter( f => !doesFieldBelongToTable( f, table ) );\n    // setFiltedFields( newFiltedFields );\n\n    setFiltedTables([...filtedTables, ...selectedTables]);\n    setSelectedTables([]);\n    setFiltedFields([]);\n    setSelectedFields([]);\n  };\n  const haveFieldId = (table, field_id) => {\n    if (table.fields != undefined) {\n      const fields = table.fields.filter(f => f.field_id == field_id);\n      if (fields.length > 0) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  const dependencedTablesFilter = field_id => {\n    const depenses = filtedTables.map(table => {\n      const {\n        constraint\n      } = table;\n      if (constraint != undefined) {\n        const dependExised = constraint.filter(constr => constr.reference_on == field_id).length;\n        if (dependExised != 0) {\n          return table;\n        } else {\n          return null;\n        }\n      }\n    });\n    return depenses.filter(d => d != null);\n  };\n  const generateFiltedTables = () => {\n    if (selectedTables.length > 0) {\n      const showTables = filtedTables.map(table => {\n        for (let i = 0; i < selectedTables.length; i++) {\n          const {\n            constraint\n          } = selectedTables[i];\n          if (constraint != undefined) {\n            for (let j = 0; j < constraint.length; j++) {\n              const constr = constraint[j];\n              if (haveFieldId(table, constr.reference_on)) {\n                return table;\n              }\n            }\n          }\n        }\n        return null;\n      });\n      const dependencedTables = filtedTables.map(table => {\n        const resultTables = [];\n        for (let i = 0; i < selectedTables.length; i++) {\n          const {\n            constraint\n          } = selectedTables[i];\n          if (constraint != undefined) {\n            for (let j = 0; j < constraint.length; j++) {\n              const constr = constraint[j];\n              const {\n                constraint_type,\n                field_id\n              } = constr;\n              if (constraint_type === \"pk\") {\n                const dptb = dependencedTablesFilter(field_id);\n                resultTables.push(...dptb);\n              }\n            }\n          }\n        }\n        return resultTables;\n      });\n      const finalTables_1 = showTables.filter(tb => tb != null);\n      const finalTables_2 = dependencedTables.filter(tb => tb != null);\n      const finalTables_3 = [];\n      const finalTables_4 = [];\n      for (let i = 0; i < finalTables_2.length; i++) {\n        const tables = finalTables_2[i];\n        finalTables_3.push(...tables);\n      }\n      for (let i = 0; i < finalTables_3.length; i++) {\n        const table = finalTables_3[i];\n        if (finalTables_4.indexOf(table) === -1) {\n          finalTables_4.push(table);\n        }\n      }\n      return [...finalTables_1, ...finalTables_4].map(table => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-1 border-1 m-1 pointer shadow-blur shadow-hover\",\n        onClick: () => {\n          filterAdd(table);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"p-0-5\",\n          children: table.table_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 21\n        }, this)\n      }, table.table_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this));\n    } else {\n      return filtedTables.map(table => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-1 border-1 m-1 pointer shadow-blur shadow-hover\",\n        onClick: () => {\n          filterAdd(table);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"p-0-5\",\n          children: table.table_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }, this)\n      }, table.table_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }, this));\n    }\n  };\n  const fieldSelecting = field => {\n    const fieldConstraints = field.constraints;\n    if (fieldConstraints) {\n      const fieldFK = fieldConstraints.filter(fc => fc.constraint_type == \"fk\");\n      if (fieldFK != undefined && fieldFK.length > 0 && pkExisted(fieldFK[0])) {\n        alert(\"Trường này bị zô hiệu vì khóa chính của nó đang trong danh sách được chọn!\");\n      } else {\n        if (selectedFields.indexOf(field) == -1) {\n          setSelectedFields([...selectedFields, field]);\n        }\n      }\n    } else {\n      if (selectedFields.indexOf(field) == -1) {\n        setSelectedFields([...selectedFields, field]);\n      }\n    }\n  };\n  const pkExisted = fk => {\n    const {\n      reference_on\n    } = fk;\n    const pk = selectedFields.filter(field => field.field_id == reference_on);\n    if (pk != undefined && pk.length > 0) {\n      return true;\n    }\n    return false;\n  };\n  const fkExisted = pk => {\n    const {\n      field_id\n    } = pk;\n    const fk = filtedFields.filter(field => field.reference_on == field_id);\n    if (fk != undefined && fk.length > 0) {\n      return true;\n    }\n    return false;\n  };\n  const fieldDisselecting = field => {\n    const newSelectedFields = selectedFields.filter(f => f.field_id != field.field_id);\n    const newParams = params.filter(f => f.field_id != field.field_id);\n    setSelectedFields([...newSelectedFields]);\n    setParams(newParams);\n  };\n  const generateParams = () => {\n    const paramNames = params.map(field => {\n      const splitted_name = field.field_name.split(' ');\n      return `:${splitted_name.join('_')}`;\n    });\n    const paramAlias = params.map(field => {\n      return `:${field.field_alias}`;\n    });\n    return {\n      display: '/' + paramNames.join('/'),\n      url: '/' + paramAlias.join('/')\n    };\n  };\n  const addOrRemoveFromURLParams = (e, field) => {\n    e.preventDefault();\n    if (params.indexOf(field) != -1) {\n      const newParams = params.filter(f => f.field_id != field.field_id);\n      setParams(newParams);\n    } else {\n      setParams([...params, field]);\n    }\n  };\n  const addCustomFields = () => {\n    const newFieldAlias = auto_id();\n    const cusField = {\n      name: \"Trường mới\",\n      field_alias: newFieldAlias,\n      fomular: \"\"\n    };\n    setCustomFields([...customFields, cusField]);\n  };\n  const updateCustomField = (field, field_type, value) => {\n    field[field_type] = value;\n    const newCustomFields = customFields.map(f => {\n      if (f.field_alias === field.field_alias) {\n        return field;\n      } else {\n        return f;\n      }\n    });\n    setCustomFields(newCustomFields);\n  };\n  const updateField = (field, field_type, value) => {\n    field[field_type] = value;\n    const newCustomFields = selectedFields.map(f => {\n      if (f.field_alias === field.field_alias) {\n        return field;\n      } else {\n        return f;\n      }\n    });\n    setSelectedFields(newCustomFields);\n  };\n  const generateConstraintsName = field => {\n    const {\n      constraints\n    } = field;\n    if (constraints != undefined && constraints.length > 0) {\n      const nameList = constraints.map(constraint => constraint.constraint_type);\n      return `(${nameList.join(', ')})`;\n    }\n    return \"\";\n  };\n\n  /* Em da lo yeu nguoi khong thuong em */\n  /*\r\n      Chia cai chon bang voi chon truong ra troi oi\r\n  */\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed-default z-index-11 fullscreen p-1\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rel z-index-2 container bg-white h-fit column\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column w-100-pct h-fit p-0-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-no-wrap border-1-bottom\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fill-available p-t-1 p-b-0-5\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"no-border w-100-pct text-24-px\",\n              value: api.name,\n              onChange: e => {\n                setApi({\n                  ...api,\n                  name: e.target.value\n                });\n              },\n              placeholder: \"API name here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-no-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-100-px flex flex-middle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"no-border w-100-pct text-center pointer block p-0-5 text-16-px\",\n              children: api.type.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fill-available flex flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-max-content\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-16-px block p-1\",\n                children: [\"Proxy: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: api.url.proxy\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 79\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-max-content\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-16-px block p-1\",\n                children: [\"URL: \", /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: api.url.url + generateParams().display\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 77\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rel z-index-9\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"abs t-0 l-0 bg-white \" + (height != 0 ? \" shadow-blur\" : \"\"),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-100-px overflow ease\",\n              style: {\n                height\n              },\n              children: criterias.map((d, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"block p-0-5 bg-white pointer hover\",\n                  onClick: () => {\n                    setHeight(0);\n                    setApi({\n                      ...api,\n                      type: d\n                    });\n                  },\n                  children: d[\"label\"]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 37\n                }, this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 34\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex w-100-pct flex-no-wrap p-0-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"fill-available flex flex-no-wrap scroll-x\",\n            children: selectedTables.map(table => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-1 w-max-content border-1 m-1 pointer shadow-blur shadow-hover\",\n              onClick: () => {\n                filterRemove(table);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"p-0-5\",\n                children: table.table_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 37\n              }, this)\n            }, table.table_id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 33\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-48-px flex flex-middle\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: dropTables,\n              className: \"bold text-24-px no-border bg-green white border-radius-50-pct pointer\",\n              style: {\n                width: \"32px\",\n                height: \"32px\"\n              },\n              children: drop ? \"–\" : \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rel z-index-8 w-100-pct\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"abs-default w-100-pct shadow-blur ease bg-white no-overflow\",\n            style: {\n              height: drop ? 350 : 0\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-100-pct overflow\",\n              style: {\n                height: 350\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap\",\n                children: generateFiltedTables()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-1 fill-available\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-no-wrap h-fit\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-50-pct p-1 h-fit overflow\",\n                style: {\n                  height: \"400px\"\n                },\n                children: selectedTables.map(table => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-0-5 bg-white shadow-blur m-t-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"block text-20-px\",\n                    children: table.table_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 456,\n                    columnNumber: 45\n                  }, this), table.fields.map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"m-t-1 pointer\",\n                    onClick: () => {\n                      fieldSelecting(field);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\",\n                      children: [field.field_name, \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                        children: generateConstraintsName(field)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 459,\n                        columnNumber: 146\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 459,\n                      columnNumber: 49\n                    }, this)\n                  }, field.field_id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 45\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-50-pct p-1 h-fit overflow\",\n                style: {\n                  height: \"400px\"\n                },\n                children: selectedFields.map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"m-t-1 pointer\",\n                  onClick: () => {\n                    fieldDisselecting(field);\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\",\n                    children: field.field_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 45\n                  }, this)\n                }, field.field_id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"border-1-top\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"abs b-0 r-0 p-1\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: submitApi,\n          className: \"upper pointer block w-max-content white text-center p-t-0-5 p-b-0-5 p-l-1 p-r-1 no-border bg-green\",\n          children: \"Th\\xEAm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"abs-default z-index-1 fullscreen trans-dark\",\n      onClick: closeDialog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 391,\n    columnNumber: 9\n  }, this);\n}, \"MGSwGNhDKwR0RiHgzKJPJkfLZRk=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","v4","uuidv4","props","version","project_id","tables","closeDialog","dispatch","proxy","unique_string","collection","collections","state","addApiToCollection","auto_id","functions","height","setHeight","tablesHeight","setTablesHeight","filter","setFilter","filtedTables","setFiltedTables","selectedTables","setSelectedTables","params","setParams","filtedFields","setFiltedFields","selectedFields","setSelectedFields","customFields","setCustomFields","criterias","id","label","value","drop","setDrop","api","setApi","type","url","name","createUniqueURL","baseURL","uniqueID","replaceAll","version_id","id_str","dropTables","submitApi","generateParams","submitBody","fields","status","fullurl","fetch","method","headers","body","JSON","stringify","data","then","res","json","doesFieldBelongToTable","field","table","undefined","existed","f","field_id","sortTableBasedOnKey","pkOnly","tb","constraint","fk","c","constraint_type","length","fkOnly","pk","valid","i","key","corespondKey","k","pkOnlyAndfkOnly","mixedKey","indexOf","console","log","filterAdd","isConflict","fkExisted","newFiltedTables","table_id","newSelectedTables","alert","filterRemove","haveFieldId","dependencedTablesFilter","depenses","map","dependExised","constr","reference_on","d","generateFiltedTables","showTables","j","dependencedTables","resultTables","dptb","push","finalTables_1","finalTables_2","finalTables_3","finalTables_4","table_name","fieldSelecting","fieldConstraints","constraints","fieldFK","fc","pkExisted","fieldDisselecting","newSelectedFields","newParams","paramNames","splitted_name","field_name","split","join","paramAlias","field_alias","display","addOrRemoveFromURLParams","e","preventDefault","addCustomFields","newFieldAlias","cusField","fomular","updateCustomField","field_type","newCustomFields","updateField","generateConstraintsName","nameList","target","index","width"],"sources":["D:/DIPE/APP/src/cpn/client/version/methods/post.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default ( props ) => {\r\n\r\n    const { version, project_id, tables, closeDialog } = props;\r\n    const dispatch = useDispatch()\r\n    const { proxy, unique_string, collection, collections } = useSelector(state => state);\r\n    const { addApiToCollection, auto_id } = useSelector( state => state.functions );\r\n    const [ height, setHeight ] = useState(0);\r\n    const [ tablesHeight, setTablesHeight ] = useState(0);\r\n\r\n    const [ filter, setFilter ] = useState([])\r\n    const [ filtedTables, setFiltedTables ] = useState([]);\r\n    const [ selectedTables, setSelectedTables ] = useState([])\r\n    const [ params, setParams ] = useState([])\r\n    const [ filtedFields, setFiltedFields ] = useState([]);\r\n    const [ selectedFields, setSelectedFields ] = useState([]);\r\n    const [ customFields, setCustomFields ] = useState([]);\r\n\r\n    const criterias = [\r\n        { id: 1, label: \"GET\", value: \"get\" },\r\n        { id: 2, label: \"POST\", value: \"post\" },\r\n        { id: 3, label: \"PUT\", value: \"put\" },\r\n        { id: 4, label: \"DELETE\", value: \"delete\" },\r\n    ]\r\n\r\n    const [ drop, setDrop ] = useState(false);\r\n\r\n    const [ api, setApi ] = useState({\r\n        type: criterias[1],\r\n        url: {},\r\n        name: \"API mới nè\"\r\n    })\r\n\r\n\r\n    const createUniqueURL = (baseURL) => {\r\n        const uniqueID = uuidv4().replaceAll(\"-\", '');\r\n        return { url: `/api/${ project_id }/${version.version_id}/${uniqueID}`, proxy, id_str: uniqueID };\r\n    }\r\n\r\n    useEffect( () => {\r\n        setApi({ ...api, url: createUniqueURL() })\r\n    }, [ version ])\r\n\r\n    useEffect(() => {\r\n        setFiltedTables(tables)\r\n    }, [tables])\r\n\r\n    const dropTables = () => {\r\n        setDrop( !drop )\r\n    }\r\n\r\n    const submitApi = () => {\r\n        const url = { ...api.url, url: api.url.url + generateParams().url, params }\r\n        const submitBody = {\r\n            ...api,\r\n            tables: selectedTables,\r\n            fields: selectedFields,\r\n            collection,\r\n            url,\r\n            status: false,\r\n            fullurl: api.url.proxy + url.url,\r\n            customFields\r\n        }\r\n\r\n        fetch(`${proxy}/api/${ unique_string }/apis/api`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"content-type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({ data: submitBody })\r\n        }).then( res => res.json() ).then( res => {\r\n            closeDialog()\r\n            delete submitBody.collection;\r\n            addApiToCollection( collections, collection, submitBody )\r\n        })\r\n    }\r\n\r\n    const doesFieldBelongToTable = (field, table) => {\r\n        const { fields } = table;\r\n        if( fields != undefined ){\r\n            const existed = fields.filter( f => f.field_id === field.field_id );\r\n            if( existed != 0 ){\r\n                return true\r\n            }else{\r\n                return false\r\n            }\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const sortTableBasedOnKey = ( tables ) => {\r\n\r\n        const pkOnly = tables.filter( tb => {\r\n            const { constraint } = tb;\r\n            const fk = constraint.filter( c => c.constraint_type == \"fk\" );\r\n            return fk.length > 0 ? false : true\r\n        })\r\n\r\n        const fkOnly = tables.filter( tb => {\r\n            const { constraint } = tb;\r\n            if( constraint && constraint.length > 0 && constraint.length %2 == 0 ){\r\n                const fk = constraint.filter( c => c.constraint_type == \"fk\" );\r\n                const pk = constraint.filter( c => c.constraint_type == \"fk\" );\r\n\r\n                let valid = true\r\n\r\n                for( let i = 0 ; i < fk.length; i++ ){\r\n                    const key = fk[i]\r\n                    const corespondKey = pk.filter( k => k.field_id == key.field_id );\r\n                    if( corespondKey.length == 0 ){\r\n                        valid = false\r\n                    }\r\n                }\r\n                return valid;\r\n            }else{\r\n                return false\r\n            }\r\n        })\r\n        const pkOnlyAndfkOnly = [ ...pkOnly, ...fkOnly ]\r\n\r\n        const mixedKey = tables.filter( tb => pkOnlyAndfkOnly.indexOf(tb) == -1 )\r\n        console.log(\"\\n\")\r\n        console.log( pkOnly )\r\n        console.log( fkOnly )\r\n        console.log( mixedKey )\r\n\r\n        return [...pkOnly, ...mixedKey, ...fkOnly ]\r\n    }\r\n\r\n    const filterAdd = ( table ) => {\r\n        const { constraint } = table;\r\n        const pk = constraint.filter( c => c.constraint_type == \"pk\" );\r\n        let isConflict = false;\r\n        for( let i = 0; i < pk.length; i++ ){\r\n            const key = pk[i]\r\n            if( fkExisted(key) ){\r\n                isConflict = true\r\n            }\r\n        }\r\n        if( !isConflict ){\r\n            const newFiltedTables = filtedTables.filter( tb => tb.table_id != table.table_id );\r\n            const newSelectedTables = sortTableBasedOnKey([ ...selectedTables, table ]);\r\n\r\n            setSelectedTables(newSelectedTables)\r\n\r\n            setFiltedTables(newFiltedTables)\r\n            setFiltedFields([ ...filtedFields, ...table.fields ])\r\n        }else{\r\n            alert(\"Không thể chọn bảng này vì khóa ngoại của nó đã tồn tại trong danh sách được chọn!\")\r\n        }\r\n    }\r\n    const filterRemove = ( table ) => {\r\n        // const newSelectedTables = selectedTables.filter( tb => tb.table_id != table.table_id );\r\n        // setFiltedTables([ ...filtedTables, table ])\r\n        // setSelectedTables(newSelectedTables)\r\n        // const newFiltedFields = filtedFields.filter( f => !doesFieldBelongToTable( f, table ) );\r\n        // setFiltedFields( newFiltedFields );\r\n\r\n\r\n        setFiltedTables([ ...filtedTables, ...selectedTables ])\r\n        setSelectedTables([ ])\r\n        setFiltedFields( [  ] );\r\n        setSelectedFields([ ])\r\n    }\r\n\r\n    const haveFieldId = ( table, field_id ) => {\r\n        if( table.fields != undefined ){\r\n            const fields = table.fields.filter( f => f.field_id == field_id );\r\n            if( fields.length > 0 ){\r\n                return true\r\n            }else{\r\n                return false\r\n            }\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const dependencedTablesFilter = ( field_id ) => {\r\n        const depenses = filtedTables.map( table => {\r\n            const { constraint } = table;\r\n            if( constraint != undefined ){\r\n                const dependExised = constraint.filter( constr => constr.reference_on == field_id).length;\r\n                if( dependExised != 0 ){\r\n                    return table;\r\n                }else{\r\n                    return null;\r\n                }\r\n            }\r\n        })\r\n        return depenses.filter( d => d != null )\r\n    }\r\n\r\n    const generateFiltedTables = () => {\r\n        if( selectedTables.length > 0 ){\r\n\r\n            const showTables = filtedTables.map( table => {\r\n\r\n                for( let i = 0; i < selectedTables.length; i++ ){\r\n                    const { constraint } = selectedTables[i];\r\n\r\n                    if( constraint != undefined ){\r\n\r\n                        for( let j = 0; j < constraint.length; j++){\r\n\r\n                            const constr = constraint[j];\r\n                            if( haveFieldId( table, constr.reference_on ) ){\r\n                                return table\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return null\r\n            })\r\n\r\n            const dependencedTables = filtedTables.map( table => {\r\n                const resultTables = []\r\n                for( let i = 0; i < selectedTables.length; i++ ){\r\n                    const { constraint } = selectedTables[i];\r\n\r\n                    if( constraint != undefined ){\r\n\r\n                        for( let j = 0; j < constraint.length; j++){\r\n\r\n                            const constr = constraint[j];\r\n                            const { constraint_type, field_id } = constr\r\n                            if( constraint_type === \"pk\" ){\r\n                                const dptb = dependencedTablesFilter( field_id );\r\n                                resultTables.push(...dptb)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return resultTables\r\n            })\r\n\r\n            const finalTables_1 = showTables.filter( tb => tb != null );\r\n            const finalTables_2 = dependencedTables.filter( tb => tb != null );\r\n            const finalTables_3 = []\r\n            const finalTables_4 = []\r\n            for( let i = 0; i < finalTables_2.length; i++ ){\r\n                const tables = finalTables_2[i];\r\n                finalTables_3.push(...tables)\r\n            }\r\n            for( let i = 0; i < finalTables_3.length; i++ ){\r\n                const table = finalTables_3[i];\r\n                if( finalTables_4.indexOf( table ) === -1 ){\r\n                    finalTables_4.push( table )\r\n                }\r\n            }\r\n\r\n            return [ ...finalTables_1, ...finalTables_4 ].map( table =>\r\n                <div key={ table.table_id } className=\"p-1 border-1 m-1 pointer shadow-blur shadow-hover\" onClick={ () => { filterAdd(table) } }>\r\n                    <span className=\"p-0-5\">{ table.table_name }</span>\r\n                </div>\r\n            )\r\n        }else{\r\n\r\n            return filtedTables.map( table =>\r\n                <div key={ table.table_id } className=\"p-1 border-1 m-1 pointer shadow-blur shadow-hover\" onClick={ () => { filterAdd(table) } }>\r\n                    <span className=\"p-0-5\">{ table.table_name }</span>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    const fieldSelecting = ( field ) => {\r\n        const fieldConstraints = field.constraints;\r\n        if( fieldConstraints ){\r\n\r\n            const fieldFK = fieldConstraints.filter( fc => fc.constraint_type == \"fk\" );\r\n            if( fieldFK != undefined && fieldFK.length > 0 && pkExisted(fieldFK[0]) ){\r\n                alert(\"Trường này bị zô hiệu vì khóa chính của nó đang trong danh sách được chọn!\")\r\n            }else{\r\n                if( selectedFields.indexOf( field) == -1 ){\r\n                    setSelectedFields( [ ...selectedFields, field ] )\r\n                }\r\n            }\r\n        }else{\r\n            if( selectedFields.indexOf( field) == -1 ){\r\n                setSelectedFields( [ ...selectedFields, field ] )\r\n            }\r\n        }\r\n    }\r\n\r\n    const pkExisted = (fk) => {\r\n        const { reference_on } = fk;\r\n        const pk = selectedFields.filter( field => field.field_id == reference_on )\r\n        if( pk != undefined && pk.length > 0 ){\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    const fkExisted = (pk) => {\r\n        const { field_id } = pk;\r\n        const fk = filtedFields.filter( field => field.reference_on == field_id )\r\n        if( fk != undefined && fk.length > 0 ){\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    const fieldDisselecting = ( field ) => {\r\n        const newSelectedFields = selectedFields.filter( f => f.field_id != field.field_id );\r\n        const newParams = params.filter( f => f.field_id != field.field_id )\r\n        setSelectedFields( [...newSelectedFields] )\r\n        setParams(newParams)\r\n    }\r\n\r\n    const generateParams = () => {\r\n        const paramNames = params.map( field => {\r\n            const splitted_name = field.field_name.split(' ');\r\n            return `:${splitted_name.join('_')}`\r\n        })\r\n\r\n        const paramAlias = params.map( field => {\r\n            return `:${ field.field_alias }`\r\n        })\r\n\r\n        return {\r\n            display: '/' + paramNames.join('/'),\r\n            url: '/' + paramAlias.join('/'),\r\n        }\r\n    }\r\n\r\n    const addOrRemoveFromURLParams = ( e, field ) => {\r\n        e.preventDefault()\r\n        if( params.indexOf( field ) != -1 ){\r\n            const newParams = params.filter( f => f.field_id != field.field_id )\r\n            setParams(newParams)\r\n\r\n        }else{\r\n            setParams([ ...params, field ])\r\n        }\r\n    }\r\n\r\n    const addCustomFields = () => {\r\n        const newFieldAlias = auto_id()\r\n        const cusField = {\r\n            name: \"Trường mới\",\r\n            field_alias: newFieldAlias,\r\n            fomular: \"\"\r\n        }\r\n        setCustomFields([...customFields, cusField])\r\n    }\r\n\r\n    const updateCustomField = ( field, field_type, value ) => {\r\n        field[ field_type ] = value\r\n        const newCustomFields = customFields.map( f => {\r\n            if( f.field_alias === field.field_alias ){\r\n                return field;\r\n            }else{\r\n                return f\r\n            }\r\n        })\r\n        setCustomFields( newCustomFields )\r\n    }\r\n\r\n    const updateField = ( field, field_type, value ) => {\r\n        field[ field_type ] = value\r\n        const newCustomFields = selectedFields.map( f => {\r\n            if( f.field_alias === field.field_alias ){\r\n                return field;\r\n            }else{\r\n                return f\r\n            }\r\n        })\r\n        setSelectedFields( newCustomFields )\r\n    }\r\n\r\n    const generateConstraintsName = ( field ) => {\r\n        const { constraints } = field;\r\n        if( constraints != undefined && constraints.length > 0 ){\r\n            const nameList = constraints.map(  constraint => constraint.constraint_type )\r\n            return `(${ nameList.join(', ') })`\r\n        }\r\n        return \"\"\r\n    }\r\n\r\n    /* Em da lo yeu nguoi khong thuong em */\r\n    /*\r\n        Chia cai chon bang voi chon truong ra troi oi\r\n    */\r\n\r\n    return(\r\n        <div className=\"fixed-default z-index-11 fullscreen p-1\">\r\n            <div className=\"rel z-index-2 container bg-white h-fit column\">\r\n                <div className=\"column w-100-pct h-fit p-0-5\">\r\n                    <div className=\"flex flex-no-wrap border-1-bottom\">\r\n                        <div className=\"fill-available p-t-1 p-b-0-5\">\r\n                            <input className=\"no-border w-100-pct text-24-px\" value={ api.name }\r\n                                onChange = { (e) => { setApi({ ...api, name: e.target.value }) } } placeholder=\"API name here\"/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-no-wrap\">\r\n                        <div className=\"w-100-px flex flex-middle\">\r\n                            <button className=\"no-border w-100-pct text-center pointer block p-0-5 text-16-px\">{ api.type.label }</button>\r\n                        </div>\r\n                        <div className=\"fill-available flex flex-wrap\">\r\n                            <div className=\"w-max-content\">\r\n                                <span className=\"text-16-px block p-1\">Proxy: <b>{ api.url.proxy }</b></span>\r\n                            </div>\r\n                            <div className=\"w-max-content\">\r\n                                <span className=\"text-16-px block p-1\">URL: <b>{ api.url.url + generateParams().display }</b></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"rel z-index-9\">\r\n                        <div className={\"abs t-0 l-0 bg-white \" + ( height != 0 ? \" shadow-blur\": \"\" )}>\r\n                            <div className=\"w-100-px overflow ease\" style={{ height }}>\r\n                            { criterias.map( (d, index) =>\r\n                                 <div key={ index }>\r\n                                    <span className=\"block p-0-5 bg-white pointer hover\"\r\n                                        onClick={ () => { setHeight(0); setApi({...api, type: d}) } }\r\n                                    >{ d[ \"label\" ] }</span>\r\n                                 </div>\r\n                              )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex w-100-pct flex-no-wrap p-0-5\">\r\n                        <div className=\"fill-available flex flex-no-wrap scroll-x\">\r\n                            { selectedTables.map( table =>\r\n                                <div key={ table.table_id } className=\"p-1 w-max-content border-1 m-1 pointer shadow-blur shadow-hover\" onClick={ () => { filterRemove(table) } }>\r\n                                    <span className=\"p-0-5\">{ table.table_name }</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"w-48-px flex flex-middle\">\r\n                            <button onClick={ dropTables } className=\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\" style={{ width: \"32px\", height: \"32px\" }}>{ drop ? \"–\": \"+\" }</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"rel z-index-8 w-100-pct\">\r\n                        <div className=\"abs-default w-100-pct shadow-blur ease bg-white no-overflow\" style={{ height: drop ? 350: 0 }}>\r\n                            <div className=\"w-100-pct overflow\" style={{ height: 350 }}>\r\n                                <div className=\"flex flex-wrap\">\r\n                                    { generateFiltedTables() }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"p-1 fill-available\">\r\n                        <div>\r\n                            <div className=\"flex flex-no-wrap h-fit\">\r\n                                <div className=\"w-50-pct p-1 h-fit overflow\" style={{ height: \"400px\" }}>\r\n                                    { selectedTables.map( table =>\r\n                                        <div className=\"p-0-5 bg-white shadow-blur m-t-2\">\r\n                                            <span className=\"block text-20-px\">{ table.table_name }</span>\r\n                                        { table.fields.map( field =>\r\n                                            <div key={field.field_id} className=\"m-t-1 pointer\" onClick={ () => { fieldSelecting( field ) } }>\r\n                                                <span className=\"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\">{ field.field_name } <i>{ generateConstraintsName(field) }</i></span>\r\n                                            </div>\r\n                                         ) }\r\n                                        </div>\r\n                                    ) }\r\n                                </div>\r\n                                <div className=\"w-50-pct p-1 h-fit overflow\" style={{ height: \"400px\" }}>\r\n                                    { selectedFields.map( field =>\r\n                                        <div key={field.field_id} className=\"m-t-1 pointer\"\r\n                                            onClick={ () => { fieldDisselecting( field ) } }\r\n                                        >\r\n                                            <span className=\"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\">{ field.field_name }</span>\r\n                                        </div>\r\n                                    ) }\r\n                                </div>\r\n                            </div>\r\n                            <hr className=\"border-1-top\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"abs b-0 r-0 p-1\">\r\n                    <button onClick={ submitApi } className=\"upper pointer block w-max-content white text-center p-t-0-5 p-b-0-5 p-l-1 p-r-1 no-border bg-green\">Thêm</button>\r\n                </div>\r\n            </div>\r\n            <div className=\"abs-default z-index-1 fullscreen trans-dark\" onClick={ closeDialog }></div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}