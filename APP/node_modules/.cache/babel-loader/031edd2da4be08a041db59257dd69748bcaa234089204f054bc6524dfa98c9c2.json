{"ast":null,"code":"import _slicedToArray from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(props){var _useParams=useParams(),page_param=_useParams.page_param;var user=props.user,removeFromUI=props.removeFromUI,readOnly=props.readOnly,alterFunc=props.alterFunc,clickTrigger=props.clickTrigger;var _useSelector=useSelector(function(state){return state;}),proxy=_useSelector.proxy,defaultImage=_useSelector.defaultImage,unique_string=_useSelector.unique_string,Confirm=_useSelector.Confirm,Alert=_useSelector.Alert,pages=_useSelector.pages;var _useSelector2=useSelector(function(state){return state.functions;}),openTab=_useSelector2.openTab;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hiddenMenu=_useState2[0],setHiddenMenu=_useState2[1];var dispatch=useDispatch();var cf=new Confirm(dispatch);var al=new Alert(dispatch);var handleClick=function handleClick(){alert('Chưa có tính năng này');};var redirect=function redirect(){if(!hiddenMenu){openTab(\"/su/user/\".concat(user.credential_string));}};var ctxMenu=function ctxMenu(e){e.preventDefault();if(!readOnly){setHiddenMenu(!hiddenMenu);}};var askRemove=function askRemove(){cf.askYesNo(\"Xóa người dùng ?\",\"Người dùng này sẽ bị xóa vĩnh viễn\",removeUser);};var removeUser=function removeUser(conf){if(conf){if(alterFunc!=undefined){alterFunc(user);}else{fetch(\"\".concat(proxy(),\"/api/\").concat(unique_string,\"/user/delete/\").concat(user.credential_string),{method:'DELETE',headers:{\"content-type\":\"application/json\"}}).then(function(res){if(!res.ok){throw new Error('Xóa người dùng thất bại');}return res.json();}).then(function(data){al.success(\"Thành công\",\"Xóa thành công\");removeFromUI(user);}).catch(function(error){// Show an error message when adding the user fails\nal.failure(\"Thất bại\",\"Xóa thất bại\");});}}};var redirectToInpuPutUser=function redirectToInpuPutUser(data){var credential_string=user.credential_string;// /su/user/edit/:credential_string\nopenTab(\"/su/user/edit/\".concat(credential_string));};return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-left\",children:user.fullname}),/*#__PURE__*/_jsx(\"td\",{className:\"text-left\",children:user.account_string}),/*#__PURE__*/_jsx(\"td\",{className:\"text-left\",children:user.email}),/*#__PURE__*/_jsx(\"td\",{className:\"text-left\",children:user.phone}),/*#__PURE__*/_jsx(\"td\",{className:\"text-left\",children:user.address}),/*#__PURE__*/_jsx(\"td\",{className:\"text-left\",children:user.account_role}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:redirectToInpuPutUser,className:\"w-24-px mg-auto m-l-0-5\",src:\"/assets/icon/edit.png\",width:\"100%\"}),/*#__PURE__*/_jsx(\"img\",{onClick:askRemove,className:\"w-24-px mg-auto m-l-0-5\",src:\"/assets/icon/delete.png\",width:\"100%\"})]})]});});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","useParams","props","page_param","user","removeFromUI","readOnly","alterFunc","clickTrigger","state","proxy","defaultImage","unique_string","Confirm","Alert","pages","functions","openTab","hiddenMenu","setHiddenMenu","dispatch","cf","al","handleClick","alert","redirect","credential_string","ctxMenu","e","preventDefault","askRemove","askYesNo","removeUser","conf","undefined","fetch","method","headers","then","res","ok","Error","json","data","success","catch","error","failure","redirectToInpuPutUser","fullname","account_string","email","phone","address","account_role"],"sources":["D:/Nhan/DIPE_V2/Client/ClientServer/APP/src/cpn/client/users/usercard.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nexport default (props) => {  \r\n    const { page_param } = useParams()\r\n    const { user, removeFromUI, readOnly, alterFunc, clickTrigger } = props;\r\n    const { proxy, defaultImage, unique_string, Confirm, Alert, pages } = useSelector(state => state);\r\n    const { openTab } = useSelector(state => state.functions)\r\n    const [hiddenMenu, setHiddenMenu] = useState(false);\r\n    \r\n    const dispatch = useDispatch()\r\n    const cf = new Confirm(dispatch)\r\n    const al = new Alert(dispatch)\r\n\r\n   \r\n\r\n    const handleClick = () => {\r\n        alert('Chưa có tính năng này');\r\n    };\r\n\r\n    const redirect = () => {\r\n        if (!hiddenMenu) {\r\n            openTab(`/su/user/${user.credential_string}`)\r\n        }\r\n    }\r\n\r\n    const ctxMenu = (e) => {\r\n        e.preventDefault();\r\n        if (!readOnly) {\r\n            setHiddenMenu(!hiddenMenu);\r\n        }\r\n    }\r\n\r\n    const askRemove = () => {\r\n        cf.askYesNo(\"Xóa người dùng ?\", \"Người dùng này sẽ bị xóa vĩnh viễn\", removeUser)\r\n    }\r\n\r\n    const removeUser = ( conf ) => {\r\n        if( conf ){\r\n            if (alterFunc != undefined) {\r\n                alterFunc(user)\r\n            }\r\n            else {\r\n                fetch(`${proxy()}/api/${unique_string}/user/delete/${user.credential_string}`, {\r\n                    method: 'DELETE',\r\n                    headers: {\r\n                        \"content-type\": \"application/json\",\r\n                    },\r\n                })\r\n                .then(res => {\r\n                    if (!res.ok) {\r\n                        throw new Error('Xóa người dùng thất bại');\r\n                    }\r\n                    return res.json();\r\n                })\r\n                .then((data) => {\r\n                    al.success(\"Thành công\",\"Xóa thành công\")\r\n                    removeFromUI(user);\r\n                })\r\n                .catch(error => {\r\n                    // Show an error message when adding the user fails\r\n                    al.failure(\"Thất bại\", \"Xóa thất bại\");\r\n                });\r\n            }\r\n        }   \r\n        \r\n    }\r\n\r\n\r\n\r\n    const redirectToInpuPutUser = (data) => {\r\n        const { credential_string } = user;\r\n        // /su/user/edit/:credential_string\r\n        openTab(`/su/user/edit/${credential_string}`)\r\n    }\r\n    return (\r\n        <tr>\r\n            <td className='text-left'>{user.fullname}</td>\r\n            <td className='text-left'>{user.account_string}</td>\r\n            {/* <td><img className=\"w-64-px block border-radius-50-pct\" src={user.avatar === defaultImage ? user.avatar : `${proxy}/${user.avatar}`} /></td> */}\r\n            <td className='text-left'>{user.email}</td>\r\n            <td className='text-left'>{user.phone}</td>\r\n            <td className='text-left'>{user.address}</td>\r\n            <td className='text-left'>{user.account_role}</td>\r\n            <td className='text-center'>\r\n                <img onClick={ redirectToInpuPutUser } className=\"w-24-px mg-auto m-l-0-5\" src={`/assets/icon/edit.png`} width=\"100%\" />\r\n                <img onClick={askRemove} className=\"w-24-px mg-auto m-l-0-5\" src={`/assets/icon/delete.png`} width=\"100%\" />\r\n            </td>\r\n        </tr>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}