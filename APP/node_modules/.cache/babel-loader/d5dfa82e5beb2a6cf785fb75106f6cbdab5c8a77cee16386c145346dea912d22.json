{"ast":null,"code":"import _toConsumableArray from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{useParams}from'react-router-dom';import $ from'jquery';/* Listing history, version control */import{Navbar,Horizon}from'../../../navbar';import UserCard from'../../users/usercard';import AddUserDialog from'./adduser';import TableView from'../../../widgets/tableView';/* Listing history, version control */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(){var _useSelector=useSelector(function(state){return state.navbarLinks.su;}),urls=_useSelector.urls,bottomUrls=_useSelector.bottomUrls;var _useParams=useParams(),project_id=_useParams.project_id;var stateColors={'INITIALIZING':\"#ff00ff\",'STARTED':\"#00ff00\",'PROGRESS':\"#0000ff\",'RELEASE':\"#3b1260\",'FINAL':\"#1d2a1d\",'COMPLETED':\"#fa9a50\",'BUG':\"#d11200\",'SUSPEND':\"#fff61e\"};var _useSelector2=useSelector(function(state){return state;}),navState=_useSelector2.navState,unique_string=_useSelector2.unique_string,proxy=_useSelector2.proxy,defaultImage=_useSelector2.defaultImage,auth=_useSelector2.auth;var _useSelector3=useSelector(function(state){return state.functions;}),dateGenerator=_useSelector3.dateGenerator,autoLabel=_useSelector3.autoLabel,openTab=_useSelector3.openTab;var _useSelector4=useSelector(function(state){return state.auth;}),credential_string=_useSelector4.credential_string,account_role=_useSelector4.account_role;var dispatch=useDispatch();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),project=_useState2[0],setProject=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),owner=_useState4[0],setOwner=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),partners=_useState6[0],setPartners=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),users=_useState8[0],setUsers=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tasks=_useState10[0],setTasks=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),task=_useState12[0],setTask=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),_task=_useState14[0],_setTask=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),taskState=_useState16[0],setTaskState=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),versions=_useState18[0],setVersions=_useState18[1];var _useState19=useState([1,0]),_useState20=_slicedToArray(_useState19,2),userScrollView=_useState20[0],setUserScrollView=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),dialog=_useState22[0],setDialog=_useState22[1];var _useState23=useState(0),_useState24=_slicedToArray(_useState23,2),stateHeight=_useState24[0],setStateHeight=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),statuses=_useState26[0],setStatuses=_useState26[1];var _useState27=useState({}),_useState28=_slicedToArray(_useState27,2),oldStatus=_useState28[0],setOldStatus=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),taskModify=_useState30[0],setTaskModify=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),taskModifyTableView=_useState32[0],setTaskModifyTableView=_useState32[1];useEffect(function(){dispatch({type:\"setNavBarHighLight\",payload:{url_id:1}});fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/projects/project/\").concat(project_id)).then(function(res){return res.json();}).then(function(resp){var _resp$data=resp.data,project=_resp$data.project,owner=_resp$data.owner,partners=_resp$data.partners,users=_resp$data.users,versions=_resp$data.versions,tasks=_resp$data.tasks,taskStates=_resp$data.taskStates,task_modify=_resp$data.task_modify;setProject(project);setOwner(owner[0]);setPartners(partners);setUsers(users);setTasks(tasks);setTask(tasks[0]);_setTask(tasks[0]);var formatedTaskModify=task_modify.map(function(change,index){return _objectSpread(_objectSpread({},change),{},{modified_on:dateGenerator(change.modified_at),id:\"ID_\".concat(index)});});setTaskModify(formatedTaskModify);setVersions(versions);setStatuses(taskStates);var oldST=taskStates.filter(function(st){return st.status_id==tasks[0].task_state;})[0];setOldStatus(oldST);});},[]);useEffect(function(){var initialView=taskModify.filter(function(tsk){return tsk.task_id==task.task_id;});setTaskModifyTableView(initialView!=undefined?initialView:[]);},[taskModify]);var removePartner=function removePartner(user){var credential_string=user.credential_string,account_role=user.account_role;var _partners=partners.filter(function(ptrs){return ptrs.credential_string!=credential_string;});var _users=users.filter(function(ptrs){return ptrs.credential_string!=credential_string;});setPartners(_partners);setUsers(_users);fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/projects/project/\").concat(project_id,\"/\").concat(credential_string),{method:\"DELETE\"}).then(function(res){return res.json();}).then(function(resp){console.log(resp);});};var addUsersDialog=function addUsersDialog(){setDialog(!dialog);};var submitPartnersAndUsers=function submitPartnersAndUsers(selectedUsers){var newPartners=selectedUsers.filter(function(u){return u.account_role===\"admin\";});var newUsers=selectedUsers.filter(function(u){return u.account_role===\"user\";});setPartners([].concat(_toConsumableArray(partners),_toConsumableArray(newPartners)));setUsers([].concat(_toConsumableArray(users),_toConsumableArray(newUsers)));fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/projects/project/\").concat(project.project_id,\"/partners/and/users\"),{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify({partners:newPartners,users:newUsers})}).then(function(res){return res.json();}).then(function(data){});};var createTask=function createTask(){fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/projects/project/tasks\"),{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify({credential_string:credential_string,project_id:project_id})}).then(function(res){return res.json();}).then(function(data){var task=data.task;setTasks([task].concat(_toConsumableArray(tasks)));});};var hasChangePri=function hasChangePri(){if(project.project_master){if(project.project_master===credential_string||task.task_owner===credential_string||account_role===\"su\"){return true;}else{return false;}}else{return false;}};var taskStateSwitch=function taskStateSwitch(){setTaskState(!taskState);if(_task!=task){setTask(_task);var changes=[{name:\"task_label\",value:_task.task_label,from_value:task.task_label,modified:{old:task.task_label,new:_task.task_label},modified_what:\"nhãn yêu cầu\"},{name:\"task_description\",value:_task.task_description,from_value:task.task_description,modified:{old:task.task_description,new:_task.task_description},modified_what:\"nội dung yêu cầu\"}];setTaskModify([_objectSpread({task_id:task.task_id,modified_by:credential_string,modified_what:\"nhãn yêu cầu\",from_value:task.task_label,to_value:_task.task_label,modified_on:dateGenerator(new Date().toString()),id:\"ID_\".concat(taskModify.length)},auth),_objectSpread({task_id:task.task_id,modified_by:credential_string,modified_what:\"nội dung yêu cầu\",from_value:task.task_description,to_value:_task.task_description,modified_on:dateGenerator(new Date().toString()),id:\"ID_\".concat(taskModify.length+1)},auth)].concat(_toConsumableArray(taskModify)));fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/projects/project/task\"),{method:\"PUT\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify({changes:changes,task_id:task.task_id,credential_string:credential_string})}).then(function(res){return res.json();}).then(function(data){var success=data.success;var newTasks=tasks.map(function(task){if(task.task_id===_task.task_id){return _task;}else{return task;}});setTasks(_toConsumableArray(newTasks));});}};var dropState=function dropState(){if(hasChangePri()){var height=0;if(stateHeight===0){height=$('#status-container').height()+25;}setStateHeight(height);}};var updateTaskStatus=function updateTaskStatus(status){if(status!=oldStatus){var _task2=_objectSpread(_objectSpread({},task),status);dropState();setTask(_objectSpread(_objectSpread({},task),status));setOldStatus(status);var changes=[{name:\"task_state\",value:status.status_id,from_value:oldStatus.status_id,modified:{old:oldStatus.status_name,new:status.status_name},modified_what:\"trạng thái của yêu cầu\"}];setTaskModify([_objectSpread({task_id:task.task_id,modified_by:credential_string,modified_what:\"trạng thái của yêu cầu\",from_value:oldStatus.status_name,to_value:status.status_name,modified_on:dateGenerator(new Date().toString()),id:\"ID_\".concat(taskModify.length)},auth)].concat(_toConsumableArray(taskModify)));fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/projects/project/task\"),{method:\"PUT\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify({changes:changes,task_id:task.task_id,credential_string:credential_string})}).then(function(res){return res.json();}).then(function(data){var success=data.success;var newTasks=tasks.map(function(task){if(task.task_id===_task2.task_id){return _task2;}else{return task;}});setTasks(_toConsumableArray(newTasks));});}};var changeTask=function changeTask(task){setTask(task);_setTask(task);var status_id=task.status_id,status_name=task.status_name;setStateHeight(0);var newTaskModified=taskModify.filter(function(tsk){return tsk.task_id==task.task_id;});setOldStatus({status_id:status_id,status_name:status_name});setTaskModifyTableView(_toConsumableArray(newTaskModified));};return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed-default fullscreen main-bg overflow flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(Navbar,{urls:urls,bottomUrls:bottomUrls}),/*#__PURE__*/_jsxs(\"div\",{className:\"app fixed-default overflow \".concat(!navState?\"app-stretch\":\"app-scaled\"),style:{height:\"100vh\"},children:[/*#__PURE__*/_jsx(Horizon,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap m-t-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct p-1 scaled-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-1 bg-white h-fit shadow-blur\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block text-28-px\",children:project.project_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-t-1 m-b-1 flex flex-no-wrap flex-aligned\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"block text-12-px bold m-r-1\",children:[\"#\",project.project_code]}),/*#__PURE__*/_jsx(\"span\",{className:\"block w-max-content white text-12-px p-t-0-5 p-b-0-5 p-l-1 p-r-1 border-radius-12-px upper\",style:{backgroundColor:\"\".concat(stateColors[project.status_name])},children:autoLabel(project.status_name)})]}),/*#__PURE__*/_jsx(\"span\",{className:\"block text-14-px gray\",children:project.description})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct p-1 scaled-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-1 bg-white flex flex-no-wrap h-fit shadow-blur\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-50-pct rel\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"block text-24-px\",children:[\"@\",owner.fullname]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"abs b-0 l-0 text-18-px\",children:\"Ph\\u1EE5 tr\\xE1ch d\\u1EF1 \\xE1n\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto p-1 rel w-50-pct\",children:/*#__PURE__*/_jsx(\"img\",{className:\"abs b-0 r-0 border-radius-12-px block shadow-blur\",style:{width:\"10em\"},src:owner.avatar===defaultImage?defaultImage:\"\".concat(proxy,\"/\").concat(owner.avatar)})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dual-scroll-view flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct p-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-100-pct column h-fit bg-white shadow-blur\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shadow-blur p-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-18-px\",children:\"C\\xE1c phi\\xEAn b\\u1EA3n\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap shadow-blur\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fill-available p-1\",children:/*#__PURE__*/_jsx(\"input\",{className:\"no-border w-100-pct\",placeholder:\"T\\xECm ki\\u1EBFm\"})}),hasChangePri()?/*#__PURE__*/_jsx(\"div\",{className:\"w-48-px flex flex-middle\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\",style:{width:\"32px\",height:\"32px\"},children:\"+\"})}):null]}),/*#__PURE__*/_jsx(\"div\",{className:\"fill-available p-0-5 overflow\",children:versions.map(function(ver){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){openTab(\"/su/project/\".concat(project_id,\"/version/\").concat(ver.version_id));},className:\"shadow-blur p-1 shadow-hover pointer ease\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-100-pct\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-20-px block\",children:ver.version_name})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-16-px block\",children:[\"b\\u1EDFi @\",/*#__PURE__*/_jsx(\"b\",{children:ver.fullname})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-16-px block\",children:dateGenerator(ver.publish_on)})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"m-t-1\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-16-px block\",children:ver.descriptions})})]},ver.version_id);})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct p-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-100-pct column h-fit bg-white shadow-blur\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shadow-blur flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){setUserScrollView([1,0]);},className:\"pointer p-1 w-50-pct flex flex-middle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-18-px \".concat(userScrollView[0]?\"\":\"gray\"),children:\"Nh\\xF3m tri\\u1EC3n khai\"})}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){setUserScrollView([0,1]);},className:\"pointer p-1 w-50-pct flex flex-middle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-18-px \".concat(userScrollView[1]?\"\":\"gray\"),children:\"Ng\\u01B0\\u1EDDi d\\xF9ng\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap shadow-blur\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fill-available p-1\",children:/*#__PURE__*/_jsx(\"input\",{className:\"no-border w-100-pct\",placeholder:\"T\\xECm ai \\u0111\\xF3...\"})}),hasChangePri()?/*#__PURE__*/_jsx(\"div\",{className:\"w-48-px flex flex-middle\",children:/*#__PURE__*/_jsx(\"button\",{onClick:addUsersDialog,className:\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\",style:{width:\"32px\",height:\"32px\"},children:\"+\"})}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"fill-available p-0-5 overflow\",children:[userScrollView[0]?/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap w-100-pct project-card-50-pct\",children:partners&&partners.map(function(user){return/*#__PURE__*/_jsx(UserCard,{user:user,alterFunc:removePartner},user.credential_string);})}):null,userScrollView[1]?/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap w-100-pct project-card-50-pct\",children:users&&users.map(function(user){return/*#__PURE__*/_jsx(UserCard,{user:user,alterFunc:removePartner},user.credential_string);})}):null]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-100-pct mg-auto\",style:{height:\"90vh\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap h-fit \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-35-pct column h-fit p-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap bg-white shadow-blur\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fill-available p-1\",children:/*#__PURE__*/_jsx(\"input\",{className:\"no-border w-100-pct\",placeholder:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-48-px flex flex-middle\",children:/*#__PURE__*/_jsx(\"button\",{onClick:createTask,className:\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\",style:{width:\"32px\",height:\"32px\"},children:\"+\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fill-available overflow m-t-1\",children:tasks.map(function(task){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){changeTask(task);},className:\"block m-b-1 p-1 bg-white shadow-blur shadow-hover pointer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block text-20-px\",children:task.task_label}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap m-t-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fill-available\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"block text-14-px\",children:[\"B\\u1EDFi @\",/*#__PURE__*/_jsx(\"b\",{children:task.fullname})]}),/*#__PURE__*/_jsx(\"span\",{className:\"block text-14-px gray\",children:dateGenerator(task.change_at)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32-px flex flex-bottom\",children:/*#__PURE__*/_jsx(\"span\",{className:\"block border-radius-50-pct\",style:{width:\"32px\",height:\"32px\",border:\"5px solid \".concat(stateColors[task.status_name])}})})]})]},task.task_id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-65-pct p-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"block h-fit bg-white scroll-y p-1 shadow-blur\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-0-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex rel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-bottom w-100-pct\",children:taskState?/*#__PURE__*/_jsx(\"input\",{className:\"block text-20-px no-border w-100-pct\",value:_task.task_label,onChange:function onChange(e){_setTask(_objectSpread(_objectSpread({},_task),{},{task_label:e.target.value}));}}):/*#__PURE__*/_jsx(\"span\",{className:\"block text-20-px\",children:_task.task_label})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-32-px\",children:hasChangePri()?/*#__PURE__*/_jsx(\"div\",{className:\"abs b-0 r-0\",onClick:taskStateSwitch,children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/icon/edit.png\",className:\"w-24-px pointer\"})}):null})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"block border-1-top\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-bottom\",children:/*#__PURE__*/_jsx(\"span\",{className:\"block text-14-px\",children:dateGenerator(task.change_at)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-bottom ml-auto pointer\",onClick:dropState,children:[/*#__PURE__*/_jsx(\"span\",{className:\"block text-14-px\",children:task.status_name}),/*#__PURE__*/_jsx(\"span\",{className:\"block border-radius-50-pct m-l-1\",style:{width:\"18px\",height:\"18px\",border:\"5px solid \".concat(stateColors[task.status_name])}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rel w-100-pct\",children:/*#__PURE__*/_jsx(\"div\",{className:\"abs t-0 r-0 no-overflow\",style:{width:\"200px\",height:\"\".concat(stateHeight,\"px\")},children:/*#__PURE__*/_jsx(\"div\",{id:\"status-container\",className:\"w-100-pct ease\",children:statuses.map(function(status){return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){updateTaskStatus(status);},className:\"flex flex-bottom m-0-5 p-0-5 bg-white shadow-blur pointer shadow-hover\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block border-radius-50-pct\",style:{width:\"18px\",height:\"18px\",border:\"5px solid \".concat(stateColors[status.status_name])}}),/*#__PURE__*/_jsx(\"span\",{className:\"block m-l-1 text-14-px\",children:status.status_name})]},status.status_id);})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-0-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"m-t-5\",children:taskState?/*#__PURE__*/_jsx(\"textarea\",{onKeyDown:function onKeyDown(e){e.target.style.height='inherit';e.target.style.height=\"\".concat(e.target.scrollHeight+15,\"px\");},className:\"block w-100-pct text-16-px no-border border-1-bottom\",value:_task.task_description,style:{minHeight:350},onChange:function onChange(e){_setTask(_objectSpread(_objectSpread({},_task),{},{task_description:e.target.value}));}}):/*#__PURE__*/_jsx(\"div\",{children:_task.task_description?_task.task_description.split('\\n').map(function(line){return/*#__PURE__*/_jsx(\"div\",{children:line?/*#__PURE__*/_jsxs(\"span\",{className:\"block w-100-pct text-16-px\",children:[line,\" \"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"block w-100-pct text-16-px p-0-5\",children:[line,\" \"]})});}):null})}),/*#__PURE__*/_jsx(\"div\",{className:\"m-t-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"block text-16-px\",children:[\"B\\u1EDFi @\",task.fullname]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-t-1\",children:[/*#__PURE__*/_jsx(\"hr\",{className:\"block border-1-top\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-no-wrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-50-pct\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block p-0-5 text-16-px\",children:\"Ng\\u01B0\\u1EDDi t\\u1EA1o y\\xEAu c\\u1EA7u\"}),/*#__PURE__*/_jsx(UserCard,{readOnly:true,user:task})]})})]}),taskModifyTableView.length>0?/*#__PURE__*/_jsx(TableView,{data:taskModifyTableView,fields:[{name:\"Thay đổi lúc\",alias:\"modified_on\"},{name:\"Bởi\",alias:\"fullname\"},{name:\"Thay đổi\",alias:\"modified_what\"},{name:\"Từ\",alias:\"from_value\"},{name:\"Thành\",alias:\"to_value\"}],index:\"id\",maxRow:5}):/*#__PURE__*/_jsx(\"span\",{className:\"block text-16-px text-center p-2\",children:\"Ch\\u01B0a c\\xF3 thay \\u0111\\u1ED5i n\\xE0o c\\u1EA3\"})]})})})]})})]})]}),dialog?/*#__PURE__*/_jsx(AddUserDialog,{submit:submitPartnersAndUsers,setDialog:addUsersDialog,partners_:partners,users_:users,project_master:project.project_master}):null]});});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","useParams","$","Navbar","Horizon","UserCard","AddUserDialog","TableView","state","navbarLinks","su","urls","bottomUrls","project_id","stateColors","navState","unique_string","proxy","defaultImage","auth","functions","dateGenerator","autoLabel","openTab","credential_string","account_role","dispatch","project","setProject","owner","setOwner","partners","setPartners","users","setUsers","tasks","setTasks","task","setTask","_task","_setTask","taskState","setTaskState","versions","setVersions","userScrollView","setUserScrollView","dialog","setDialog","stateHeight","setStateHeight","statuses","setStatuses","oldStatus","setOldStatus","taskModify","setTaskModify","taskModifyTableView","setTaskModifyTableView","type","payload","url_id","fetch","then","res","json","resp","data","taskStates","task_modify","formatedTaskModify","map","change","index","modified_on","modified_at","id","oldST","filter","st","status_id","task_state","initialView","tsk","task_id","undefined","removePartner","user","_partners","ptrs","_users","method","console","log","addUsersDialog","submitPartnersAndUsers","selectedUsers","newPartners","u","newUsers","headers","body","JSON","stringify","createTask","hasChangePri","project_master","task_owner","taskStateSwitch","changes","name","value","task_label","from_value","modified","old","new","modified_what","task_description","modified_by","to_value","Date","toString","length","success","newTasks","dropState","height","updateTaskStatus","status","status_name","changeTask","newTaskModified","project_name","project_code","backgroundColor","description","fullname","width","avatar","ver","version_id","version_name","publish_on","descriptions","change_at","border","e","target","style","scrollHeight","minHeight","split","line","alias"],"sources":["D:/Nhan/DIPE_V2/Client/ClientServer/APP/src/cpn/client/projects/suprojects/suproject.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport $ from 'jquery';\r\n/* Listing history, version control */\r\nimport { Navbar, Horizon } from '../../../navbar';\r\nimport UserCard from '../../users/usercard';\r\nimport AddUserDialog from './adduser';\r\n\r\nimport TableView from '../../../widgets/tableView';\r\n\r\n/* Listing history, version control */\r\n\r\nexport default () => {\r\n    const { urls, bottomUrls } = useSelector( state => state.navbarLinks.su )\r\n    const { project_id } = useParams()\r\n\r\n    const stateColors = {\r\n        'INITIALIZING': \"#ff00ff\",\r\n        'STARTED': \"#00ff00\",\r\n        'PROGRESS': \"#0000ff\",\r\n        'RELEASE': \"#3b1260\",\r\n        'FINAL': \"#1d2a1d\",\r\n        'COMPLETED': \"#fa9a50\",\r\n        'BUG': \"#d11200\",\r\n        'SUSPEND': \"#fff61e\",\r\n       }\r\n\r\n    const { navState, unique_string, proxy, defaultImage, auth } = useSelector( state => state );\r\n    const { dateGenerator, autoLabel, openTab } = useSelector( state => state.functions )\r\n    const { credential_string, account_role } = useSelector( state => state.auth );\r\n    const dispatch = useDispatch()\r\n\r\n    const [ project, setProject ] = useState({})\r\n    const [ owner, setOwner ] = useState({})\r\n    const [ partners, setPartners ] = useState([])\r\n    const [ users, setUsers ] = useState([])\r\n\r\n    const [ tasks, setTasks ] = useState([])\r\n    const [ task, setTask ] = useState({});\r\n    const [ _task, _setTask ] = useState({})\r\n    const [ taskState, setTaskState ] = useState( 0 );\r\n\r\n    const [ versions, setVersions ] = useState([])\r\n\r\n    const [ userScrollView, setUserScrollView ] = useState([ 1, 0 ])\r\n    const [ dialog, setDialog ] = useState(false)\r\n\r\n    const [ stateHeight, setStateHeight ] = useState(0);\r\n    const [ statuses, setStatuses ] = useState([]);\r\n    const [ oldStatus, setOldStatus ] = useState({})\r\n\r\n    const [ taskModify, setTaskModify ] = useState([])\r\n    const [ taskModifyTableView, setTaskModifyTableView] = useState([]);\r\n\r\n    useEffect( () => {\r\n        dispatch({\r\n            type: \"setNavBarHighLight\",\r\n            payload: { url_id: 1 }\r\n        })\r\n\r\n\r\n        fetch(`${proxy}/api/${ unique_string }/projects/project/${project_id}`).then( res => res.json() )\r\n        .then( resp => {\r\n            const { project, owner, partners, users, versions, tasks, taskStates, task_modify } = resp.data;\r\n            setProject(project);\r\n            setOwner(owner[0]); setPartners(partners); setUsers(users);\r\n            setTasks( tasks );\r\n            setTask( tasks[0] )\r\n            _setTask( tasks[0] )\r\n\r\n            const formatedTaskModify = task_modify.map( (change, index) => {\r\n                return { ...change, modified_on: dateGenerator( change.modified_at ), id: `ID_${index}` }\r\n            })\r\n            setTaskModify( formatedTaskModify )\r\n\r\n            setVersions(versions);\r\n            setStatuses(taskStates);\r\n\r\n            const oldST = taskStates.filter( st => st.status_id == tasks[0].task_state )[0];\r\n            setOldStatus( oldST );\r\n        })\r\n    }, [])\r\n\r\n    useEffect( () => {\r\n        const initialView = taskModify.filter( tsk => tsk.task_id == task.task_id );\r\n        setTaskModifyTableView( initialView != undefined? initialView: [] );\r\n    }, [ taskModify ])\r\n\r\n    const removePartner = ( user ) => {\r\n        const { credential_string, account_role } = user;\r\n\r\n        const _partners = partners.filter( ptrs => ptrs.credential_string != credential_string );\r\n        const _users = users.filter( ptrs => ptrs.credential_string != credential_string );\r\n        setPartners( _partners );\r\n        setUsers( _users )\r\n\r\n        fetch(`${proxy}/api/${unique_string}/projects/project/${project_id}/${ credential_string }`, {\r\n            method: \"DELETE\"\r\n        }).then( res => res.json() ).then( resp => {\r\n            console.log(resp);\r\n        })\r\n    }\r\n\r\n    const addUsersDialog = () => {\r\n        setDialog( !dialog )\r\n    }\r\n\r\n    const submitPartnersAndUsers = ( selectedUsers ) => {\r\n        const newPartners = selectedUsers.filter( u => u.account_role === \"admin\" );\r\n        const newUsers = selectedUsers.filter( u => u.account_role === \"user\" );\r\n\r\n        setPartners([...partners, ...newPartners])\r\n        setUsers([...users, ...newUsers])\r\n\r\n        fetch(`${proxy}/api/${ unique_string }/projects/project/${ project.project_id }/partners/and/users`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"content-type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({ partners: newPartners, users: newUsers })\r\n        }).then( res => res.json() ).then( data => {\r\n\r\n        })\r\n    }\r\n\r\n    const createTask = () => {\r\n        fetch(`${proxy}/api/${ unique_string }/projects/project/tasks`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"content-type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({ credential_string, project_id })\r\n        }).then( res => res.json() ).then( data => {\r\n            const { task } = data;\r\n            setTasks([task, ...tasks]);\r\n        })\r\n    }\r\n\r\n    const hasChangePri = () => {\r\n        if( project.project_master ){\r\n            if( project.project_master === credential_string || task.task_owner === credential_string || account_role===\"su\" ){\r\n                return true;\r\n            }\r\n            else{\r\n                return false\r\n            }\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const taskStateSwitch = () => {\r\n        setTaskState( !taskState )\r\n\r\n        if( _task != task ){\r\n            setTask(_task);\r\n            const changes = [{\r\n                    name: \"task_label\",\r\n                    value: _task.task_label,\r\n                    from_value: task.task_label,\r\n                    modified: {\r\n                        old: task.task_label,\r\n                        new: _task.task_label\r\n                    },\r\n                    modified_what: \"nhãn yêu cầu\"\r\n                },\r\n                {\r\n                    name: \"task_description\",\r\n                    value: _task.task_description,\r\n                    from_value: task.task_description,\r\n                    modified: {\r\n                        old: task.task_description,\r\n                        new: _task.task_description\r\n                    },\r\n                    modified_what: \"nội dung yêu cầu\"\r\n                },\r\n            ]\r\n\r\n            setTaskModify([\r\n                {\r\n                    task_id: task.task_id,\r\n                    modified_by: credential_string,\r\n                    modified_what: \"nhãn yêu cầu\",\r\n                    from_value: task.task_label,\r\n                    to_value: _task.task_label,\r\n                    modified_on: dateGenerator(new Date().toString()),\r\n                    id: `ID_${taskModify.length}`,\r\n                    ...auth\r\n                },\r\n                {\r\n                    task_id: task.task_id,\r\n                    modified_by: credential_string,\r\n                    modified_what: \"nội dung yêu cầu\",\r\n                    from_value: task.task_description,\r\n                    to_value: _task.task_description,\r\n                    modified_on: dateGenerator(new Date().toString()),\r\n                    id: `ID_${taskModify.length + 1}`,\r\n                    ...auth\r\n                }, ...taskModify\r\n            ])\r\n\r\n            fetch(`${ proxy }/api/${ unique_string }/projects/project/task`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    \"content-type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ changes, task_id: task.task_id, credential_string })\r\n            }).then( res => res.json() ).then( data => {\r\n                const { success } = data\r\n                const newTasks = tasks.map( task => {\r\n                    if( task.task_id === _task.task_id ){\r\n                        return _task;\r\n                    }else{\r\n                        return task;\r\n                    }\r\n                })\r\n                setTasks([...newTasks])\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    const dropState = () => {\r\n        if( hasChangePri() ){\r\n            let height = 0;\r\n            if( stateHeight === 0 ){\r\n                height = $('#status-container').height() + 25;\r\n            }\r\n            setStateHeight(height);\r\n        }\r\n    }\r\n\r\n    const updateTaskStatus = ( status ) => {\r\n        if( status != oldStatus ){\r\n            const _task = { ...task, ...status };\r\n            dropState();\r\n            setTask({ ...task, ...status })\r\n            setOldStatus( status )\r\n\r\n            const changes = [{\r\n                    name: \"task_state\",\r\n                    value: status.status_id,\r\n                    from_value: oldStatus.status_id,\r\n                    modified: {\r\n                        old: oldStatus.status_name,\r\n                        new: status.status_name\r\n                    },\r\n                    modified_what: \"trạng thái của yêu cầu\"\r\n                },\r\n            ]\r\n\r\n            setTaskModify([\r\n                {\r\n                    task_id: task.task_id,\r\n                    modified_by: credential_string,\r\n                    modified_what: \"trạng thái của yêu cầu\",\r\n                    from_value: oldStatus.status_name,\r\n                    to_value:  status.status_name,\r\n                    modified_on: dateGenerator(new Date().toString()),\r\n                    id: `ID_${taskModify.length}`,\r\n                    ...auth\r\n                }, ...taskModify\r\n            ])\r\n\r\n            fetch(`${ proxy }/api/${ unique_string }/projects/project/task`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    \"content-type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ changes, task_id: task.task_id, credential_string })\r\n            }).then( res => res.json() ).then( data => {\r\n                const { success } = data\r\n                const newTasks = tasks.map( task => {\r\n                    if( task.task_id === _task.task_id ){\r\n                        return _task;\r\n                    }else{\r\n                        return task;\r\n                    }\r\n                })\r\n                setTasks([...newTasks])\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    const changeTask = ( task ) => {\r\n        setTask( task );\r\n        _setTask(task);\r\n        const { status_id, status_name } = task;\r\n        setStateHeight(0)\r\n        const newTaskModified = taskModify.filter( tsk => tsk.task_id == task.task_id )\r\n        setOldStatus({ status_id, status_name })\r\n\r\n        setTaskModifyTableView( [ ...newTaskModified ])\r\n    }\r\n\r\n    return(\r\n        <div className=\"fixed-default fullscreen main-bg overflow flex flex-no-wrap\">\r\n            <Navbar urls={ urls } bottomUrls={ bottomUrls }/>\r\n            <div className={`app fixed-default overflow ${ !navState ? \"app-stretch\": \"app-scaled\" }`} style={{ height: \"100vh\" }}>\r\n                <Horizon />\r\n                <div className=\"p-1\">\r\n\r\n                    {/* PROJECT AND MASTER */}\r\n                    <div className=\"flex flex-wrap m-t-1\">\r\n                        <div className=\"w-50-pct p-1 scaled-card\">\r\n                            <div className=\"p-1 bg-white h-fit shadow-blur\">\r\n                                <span className=\"block text-28-px\">{ project.project_name }</span>\r\n                                <div className=\"m-t-1 m-b-1 flex flex-no-wrap flex-aligned\">\r\n                                    <span className=\"block text-12-px bold m-r-1\">#{ project.project_code }</span>\r\n                                    <span className=\"block w-max-content white text-12-px p-t-0-5 p-b-0-5 p-l-1 p-r-1 border-radius-12-px upper\" style={{ backgroundColor: `${ stateColors[ project.status_name ] }` }}>{ autoLabel(project.status_name) }</span>\r\n                                </div>\r\n                                <span className=\"block text-14-px gray\">{ project.description }</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"w-50-pct p-1 scaled-card\">\r\n                            <div className=\"p-1 bg-white flex flex-no-wrap h-fit shadow-blur\">\r\n                                <div className=\"w-50-pct rel\">\r\n                                    <span className=\"block text-24-px\">@{ owner.fullname }</span>\r\n                                    <div className=\"p-1\">\r\n                                        <span className=\"abs b-0 l-0 text-18-px\">Phụ trách dự án</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"ml-auto p-1 rel w-50-pct\">\r\n                                    <img className=\"abs b-0 r-0 border-radius-12-px block shadow-blur\" style={{ width: \"10em\" }} src={ owner.avatar === defaultImage? defaultImage : `${proxy}/${ owner.avatar }`} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/*  VERSION AND USER */}\r\n\r\n                    {/* VERSION */}\r\n                    <div className=\"dual-scroll-view flex flex-no-wrap\">\r\n                        <div className=\"w-50-pct p-1\">\r\n                            <div className=\"w-100-pct column h-fit bg-white shadow-blur\">\r\n                                <div className=\"shadow-blur p-1\">\r\n                                    <span className=\"text-18-px\">Các phiên bản</span>\r\n                                </div>\r\n\r\n                                <div className=\"flex flex-no-wrap shadow-blur\">\r\n                                    <div className=\"fill-available p-1\">\r\n                                        <input className=\"no-border w-100-pct\" placeholder=\"Tìm kiếm\"/>\r\n                                    </div>\r\n                                    { hasChangePri() ?\r\n                                        <div className=\"w-48-px flex flex-middle\">\r\n                                            <button className=\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\" style={{ width: \"32px\", height: \"32px\" }}>+</button>\r\n                                        </div>\r\n                                        : null\r\n                                     }\r\n                                </div>\r\n\r\n                                <div className=\"fill-available p-0-5 overflow\">\r\n                                    {\r\n                                        versions.map( ver =>\r\n                                            <div key={ ver.version_id } onClick={ () => { openTab(`/su/project/${ project_id }/version/${ ver.version_id }`) } } className=\"shadow-blur p-1 shadow-hover pointer ease\">\r\n                                                <div className=\"flex flex-wrap\">\r\n                                                    <div className=\"w-100-pct\">\r\n                                                        <span className=\"text-20-px block\">{ ver.version_name }</span>\r\n                                                    </div>\r\n                                                    <div className=\"w-50-pct\">\r\n                                                        <span className=\"text-16-px block\">bởi @<b>{ ver.fullname }</b></span>\r\n                                                    </div>\r\n                                                    <div className=\"w-50-pct\">\r\n                                                        <span className=\"text-16-px block\">{ dateGenerator(ver.publish_on) }</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"m-t-1\">\r\n                                                    <span className=\"text-16-px block\">{ver.descriptions}</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* PARTNERS AND USERS */}\r\n\r\n                        <div className=\"w-50-pct p-1\">\r\n                            <div className=\"w-100-pct column h-fit bg-white shadow-blur\">\r\n                                <div className=\"shadow-blur flex flex-no-wrap\">\r\n                                    <div  onClick={ () => { setUserScrollView([ 1, 0 ]) } } className=\"pointer p-1 w-50-pct flex flex-middle\">\r\n                                        <span className={`text-18-px ${ userScrollView[0] ? \"\": \"gray\" }`}>Nhóm triển khai</span>\r\n                                    </div>\r\n                                    <div  onClick={ () => { setUserScrollView([ 0, 1 ]) } } className=\"pointer p-1 w-50-pct flex flex-middle\">\r\n                                        <span className={`text-18-px ${ userScrollView[1] ? \"\": \"gray\" }`}>Người dùng</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex flex-no-wrap shadow-blur\">\r\n                                    <div className=\"fill-available p-1\">\r\n                                        <input className=\"no-border w-100-pct\" placeholder=\"Tìm ai đó...\"/>\r\n                                    </div>\r\n                                    { hasChangePri() ?\r\n                                        <div className=\"w-48-px flex flex-middle\">\r\n                                            <button onClick={ addUsersDialog } className=\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\" style={{ width: \"32px\", height: \"32px\" }}>+</button>\r\n                                        </div>\r\n                                        : null\r\n                                     }\r\n                                </div>\r\n                                <div className=\"fill-available p-0-5 overflow\">\r\n\r\n                                    { userScrollView[0] ?\r\n                                        <div className=\"flex flex-wrap w-100-pct project-card-50-pct\">\r\n                                            { partners && partners.map( user =>\r\n                                                <UserCard user={ user } key={ user.credential_string } alterFunc = { removePartner }/>\r\n                                            )}\r\n                                        </div>\r\n                                         : null\r\n                                    }\r\n\r\n                                    { userScrollView[1] ?\r\n                                        <div className=\"flex flex-wrap w-100-pct project-card-50-pct\">\r\n                                            { users && users.map( user =>\r\n                                                <UserCard user={ user } key={ user.credential_string } alterFunc = { removePartner }/>\r\n                                            )}\r\n                                        </div> : null\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    {/* TASKS */}\r\n\r\n                    <div className=\"w-100-pct mg-auto\" style={{ height: \"90vh\" }}>\r\n                        <div className=\"flex flex-no-wrap h-fit \">\r\n                            <div className=\"w-35-pct column h-fit p-1\">\r\n                                {/* SEARCH AND ADD */}\r\n                                <div className=\"flex flex-no-wrap bg-white shadow-blur\">\r\n                                    <div className=\"fill-available p-1\">\r\n                                        <input className=\"no-border w-100-pct\" placeholder=\"...\"/>\r\n                                    </div>\r\n                                    <div className=\"w-48-px flex flex-middle\">\r\n                                        <button onClick={ createTask } className=\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\" style={{ width: \"32px\", height: \"32px\" }}>+</button>\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n                                <div className=\"fill-available overflow m-t-1\">\r\n\r\n                                    { tasks.map( task =>\r\n                                        <div key={task.task_id} onClick={ () => { changeTask( task ) } } className=\"block m-b-1 p-1 bg-white shadow-blur shadow-hover pointer\">\r\n                                            <span className=\"block text-20-px\">{ task.task_label }</span>\r\n                                            <div className=\"flex flex-no-wrap m-t-3\">\r\n                                                <div className=\"fill-available\">\r\n                                                    <span className=\"block text-14-px\">Bởi @<b>{ task.fullname }</b></span>\r\n                                                    <span className=\"block text-14-px gray\">{ dateGenerator(task.change_at) }</span>\r\n                                                </div>\r\n                                                <div className=\"w-32-px flex flex-bottom\">\r\n                                                    <span className=\"block border-radius-50-pct\" style={{ width: \"32px\", height: \"32px\", border: `5px solid ${ stateColors[ task.status_name ] }`}}/>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ) }\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"w-65-pct p-1\">\r\n                                <div className=\"block h-fit bg-white scroll-y p-1 shadow-blur\">\r\n                                    <div className=\"p-1\">\r\n\r\n                                    {/* Task header */}\r\n                                    <div className=\"p-0-5\">\r\n                                        <div className=\"flex rel\">\r\n                                            <div className=\"flex flex-bottom w-100-pct\">\r\n                                                { taskState ?\r\n                                                    <input className=\"block text-20-px no-border w-100-pct\" value={ _task.task_label }\r\n                                                        onChange={ (e) => { _setTask({ ..._task, task_label: e.target.value }) } }\r\n                                                    />\r\n                                                    :\r\n                                                    <span className=\"block text-20-px\">{ _task.task_label }</span>\r\n                                                }\r\n                                            </div>\r\n                                            <div className=\"w-32-px\">\r\n                                            { hasChangePri() ?\r\n                                                <div className=\"abs b-0 r-0\" onClick={ taskStateSwitch }>\r\n                                                    <img src=\"/assets/icon/edit.png\" className=\"w-24-px pointer\"/>\r\n                                                </div>\r\n                                            : null\r\n                                            }\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <hr className=\"block border-1-top\"/>\r\n\r\n                                        <div className=\"flex\">\r\n                                            <div className=\"flex flex-bottom\">\r\n                                                <span className=\"block text-14-px\">{ dateGenerator(task.change_at) }</span>\r\n                                            </div>\r\n                                            <div className=\"flex flex-bottom ml-auto pointer\" onClick={ dropState }>\r\n                                                <span className=\"block text-14-px\">{ task.status_name }</span>\r\n                                                <span className=\"block border-radius-50-pct m-l-1\" style={{ width: \"18px\", height: \"18px\", border: `5px solid ${ stateColors[ task.status_name ] }`}}/>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"rel w-100-pct\">\r\n                                            <div className=\"abs t-0 r-0 no-overflow\" style={{ width: \"200px\", height: `${stateHeight}px`}}>\r\n                                                <div id=\"status-container\" className=\"w-100-pct ease\">\r\n                                                    {\r\n                                                        statuses.map( status =>\r\n                                                            <div key={status.status_id} onClick={ () => { updateTaskStatus( status ) } } className=\"flex flex-bottom m-0-5 p-0-5 bg-white shadow-blur pointer shadow-hover\">\r\n                                                                <span className=\"block border-radius-50-pct\" style={{ width: \"18px\", height: \"18px\", border: `5px solid ${ stateColors[ status.status_name ] }`}}/>\r\n                                                                <span className=\"block m-l-1 text-14-px\">{ status.status_name }</span>\r\n                                                            </div>\r\n                                                        )\r\n                                                    }\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n\r\n                                    {/* Task body */}\r\n                                        <div className=\"p-0-5\">\r\n                                            <div className=\"m-t-5\">\r\n                                                { taskState ?\r\n                                                    <textarea onKeyDown = { (e) => {\r\n                                                        e.target.style.height = 'inherit';\r\n                                                        e.target.style.height = `${e.target.scrollHeight + 15 }px`;\r\n                                                    }}\r\n\r\n\r\n                                                        className=\"block w-100-pct text-16-px no-border border-1-bottom\"\r\n                                                        value={ _task.task_description }\r\n                                                        style={{ minHeight: 350 }}\r\n                                                        onChange={ (e) => { _setTask({ ..._task, task_description: e.target.value }) } }\r\n                                                    />\r\n                                                    :\r\n                                                    <div>\r\n                                                        { _task.task_description ? _task.task_description.split('\\n').map( line =>\r\n                                                                <div>\r\n                                                                    { line ?\r\n                                                                        <span className=\"block w-100-pct text-16-px\">{ line } </span>\r\n                                                                        :\r\n                                                                        <span className=\"block w-100-pct text-16-px p-0-5\">{ line } </span>\r\n                                                                    }\r\n                                                                </div>\r\n                                                        ) : null }\r\n                                                    </div>\r\n                                                }\r\n\r\n                                            </div>\r\n\r\n                                            <div className=\"m-t-2\">\r\n                                                <span className=\"block text-16-px\">Bởi @{task.fullname }</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    { /* TASK MEMBERS */ }\r\n                                    <div className=\"m-t-1\">\r\n                                        <hr className=\"block border-1-top\"/>\r\n\r\n                                        <div className=\"flex flex-no-wrap\">\r\n                                            <div className=\"w-50-pct\">\r\n                                                <span className=\"block p-0-5 text-16-px\">Người tạo yêu cầu</span>\r\n                                                <UserCard readOnly={ true } user={ task }/>\r\n                                            </div>\r\n\r\n                                            {/*\r\n                                            <div className=\"w-50-pct\">\r\n                                                <span className=\"block p-0-5 text-16-px\">Nhóm thực hiện</span>\r\n                                                <UserCard readOnly={ true } user={ task }/>\r\n                                                <UserCard readOnly={ true } user={ task }/>\r\n                                            </div>\r\n                                            */}\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    { /* TASK MODIFY */ }\r\n                                    { taskModifyTableView.length > 0 ?\r\n\r\n                                    <TableView data={ taskModifyTableView } fields={[\r\n                                        { name: \"Thay đổi lúc\", alias: \"modified_on\" },\r\n                                        { name: \"Bởi\", alias: \"fullname\" },\r\n                                        { name: \"Thay đổi\", alias: \"modified_what\" },\r\n                                        { name: \"Từ\", alias: \"from_value\" },\r\n                                        { name: \"Thành\", alias: \"to_value\" },\r\n                                    ]} index={ \"id\" } maxRow={5}\r\n                                    /> : <span className=\"block text-16-px text-center p-2\">Chưa có thay đổi nào cả</span>\r\n                                    }\r\n\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </div>\r\n            { dialog ?\r\n                <AddUserDialog submit={ submitPartnersAndUsers } setDialog={ addUsersDialog } partners_ = { partners } users_ ={ users } project_master={ project.project_master }/>\r\n                : null\r\n            }\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}