{"ast":null,"code":"import _slicedToArray from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(props){var user=props.user,removeFromUI=props.removeFromUI,readOnly=props.readOnly,alterFunc=props.alterFunc;var _useSelector=useSelector(function(state){return state;}),proxy=_useSelector.proxy,defaultImage=_useSelector.defaultImage,unique_string=_useSelector.unique_string;var _useSelector2=useSelector(function(state){return state.functions;}),openTab=_useSelector2.openTab;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hiddenMenu=_useState2[0],setHiddenMenu=_useState2[1];var redirect=function redirect(){if(!hiddenMenu){openTab(\"/su/user/\".concat(user.credential_string));}};var ctxMenu=function ctxMenu(e){e.preventDefault();if(!readOnly){setHiddenMenu(!hiddenMenu);}};var removeUser=function removeUser(){if(alterFunc!=undefined){alterFunc(user);}else{fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/user/delete/\").concat(user.credential_string),{method:'DELETE',headers:{\"content-type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(data){removeFromUI(user);});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"rel project-card p-0-5 bg-white m-0-5 shadow-blur pointer shadow-hover\",onClick:redirect,onContextMenu:ctxMenu,children:[hiddenMenu?/*#__PURE__*/_jsx(\"div\",{className:\"abs t-0 r-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-no-wrap m-0-5\",onClick:removeUser,children:/*#__PURE__*/_jsx(\"img\",{className:\"w-20-px block\",src:\"/assets/icon/cross-color.png\"})})}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-middle w-100-px\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100-pct block border-radius-50-pct\",src:user.avatar===defaultImage?user.avatar:\"\".concat(proxy,\"/\").concat(user.avatar)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-aligned flex-wrap w-100-pct m-l-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-20-px w-100-pct block\",children:user.account_string}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-16-px w-100-pct block italic bold\",children:[\"@\",user.fullname]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-16-px w-100-pct block gray\",children:user.email})]})]})]},user.credential_string);});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","props","user","removeFromUI","readOnly","alterFunc","state","proxy","defaultImage","unique_string","functions","openTab","hiddenMenu","setHiddenMenu","redirect","credential_string","ctxMenu","e","preventDefault","removeUser","undefined","fetch","method","headers","then","res","json","data","avatar","account_string","fullname","email"],"sources":["D:/Nhan/DIPE_V2/Client/DIPE/APP/src/cpn/client/users/usercard.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nexport default (props) => {\r\n    const { user, removeFromUI, readOnly, alterFunc } = props;\r\n    const { proxy, defaultImage, unique_string } = useSelector( state => state );\r\n    const { openTab } = useSelector( state => state.functions )\r\n    const [ hiddenMenu, setHiddenMenu ] = useState(false);\r\n    const redirect = () => {\r\n        if( !hiddenMenu ){\r\n            openTab(`/su/user/${ user.credential_string }`)\r\n        }\r\n    }\r\n\r\n    const ctxMenu = (e) => {\r\n        e.preventDefault();\r\n        if( !readOnly ){\r\n            setHiddenMenu( !hiddenMenu );\r\n        }\r\n    }\r\n\r\n    const removeUser = () => {\r\n        if( alterFunc != undefined ){\r\n            alterFunc(user)\r\n        }\r\n        else{\r\n            fetch(`${proxy}/api/${ unique_string }/user/delete/${ user.credential_string }`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    \"content-type\": \"application/json\",\r\n                },\r\n            }).then( res => res.json() ) .then( (data) => {\r\n                removeFromUI( user );\r\n            })\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"rel project-card p-0-5 bg-white m-0-5 shadow-blur pointer shadow-hover\" key={ user.credential_string }\r\n            onClick={ redirect } onContextMenu = { ctxMenu }\r\n        >\r\n            {\r\n                hiddenMenu ?\r\n                <div className=\"abs t-0 r-0\">\r\n                    <div className=\"flex flex-no-wrap m-0-5\" onClick={ removeUser }>\r\n                        <img className=\"w-20-px block\" src=\"/assets/icon/cross-color.png\"/>\r\n                    </div>\r\n                </div> : null\r\n            }\r\n            <div className=\"flex flex-no-wrap\">\r\n                <div className=\"flex flex-middle w-100-px\">\r\n                    <img className=\"w-100-pct block border-radius-50-pct\" src={ user.avatar === defaultImage ? user.avatar : `${proxy}/${ user.avatar }`}/>\r\n                </div>\r\n                <div className=\"flex flex-aligned flex-wrap w-100-pct m-l-2\">\r\n                    <span className=\"text-20-px w-100-pct block\">{ user.account_string }</span>\r\n                    <span className=\"text-16-px w-100-pct block italic bold\">@{ user.fullname }</span>\r\n                    <span className=\"text-16-px w-100-pct block gray\">{ user.email }</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"qHAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAAC,wFAEvD,eAAe,SAACC,KAAK,CAAK,CACtB,GAAQC,KAAI,CAAwCD,KAAK,CAAjDC,IAAI,CAAEC,YAAY,CAA0BF,KAAK,CAA3CE,YAAY,CAAEC,QAAQ,CAAgBH,KAAK,CAA7BG,QAAQ,CAAEC,SAAS,CAAKJ,KAAK,CAAnBI,SAAS,CAC/C,iBAA+CL,WAAW,CAAE,SAAAM,KAAK,QAAIA,MAAK,GAAE,CAApEC,KAAK,cAALA,KAAK,CAAEC,YAAY,cAAZA,YAAY,CAAEC,aAAa,cAAbA,aAAa,CAC1C,kBAAoBT,WAAW,CAAE,SAAAM,KAAK,QAAIA,MAAK,CAACI,SAAS,GAAE,CAAnDC,OAAO,eAAPA,OAAO,CACf,cAAsCd,QAAQ,CAAC,KAAK,CAAC,wCAA7Ce,UAAU,eAAEC,aAAa,eACjC,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,EAAS,CACnB,GAAI,CAACF,UAAU,CAAE,CACbD,OAAO,oBAAcT,IAAI,CAACa,iBAAiB,EAAI,CACnD,CACJ,CAAC,CAED,GAAMC,QAAO,CAAG,QAAVA,QAAO,CAAIC,CAAC,CAAK,CACnBA,CAAC,CAACC,cAAc,EAAE,CAClB,GAAI,CAACd,QAAQ,CAAE,CACXS,aAAa,CAAE,CAACD,UAAU,CAAE,CAChC,CACJ,CAAC,CAED,GAAMO,WAAU,CAAG,QAAbA,WAAU,EAAS,CACrB,GAAId,SAAS,EAAIe,SAAS,CAAE,CACxBf,SAAS,CAACH,IAAI,CAAC,CACnB,CAAC,IACG,CACAmB,KAAK,WAAId,KAAK,iBAASE,aAAa,yBAAkBP,IAAI,CAACa,iBAAiB,EAAK,CAC7EO,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CACJ,CAAC,CAAC,CAACC,IAAI,CAAE,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAE,CAAEF,IAAI,CAAE,SAACG,IAAI,CAAK,CAC1CxB,YAAY,CAAED,IAAI,CAAE,CACxB,CAAC,CAAC,CACN,CACJ,CAAC,CAED,mBACI,aAAK,SAAS,CAAC,wEAAwE,CACnF,OAAO,CAAGY,QAAU,CAAC,aAAa,CAAKE,OAAS,WAG5CJ,UAAU,cACV,YAAK,SAAS,CAAC,aAAa,uBACxB,YAAK,SAAS,CAAC,yBAAyB,CAAC,OAAO,CAAGO,UAAY,uBAC3D,YAAK,SAAS,CAAC,eAAe,CAAC,GAAG,CAAC,8BAA8B,EAAE,EACjE,EACJ,CAAG,IAAI,cAEjB,aAAK,SAAS,CAAC,mBAAmB,wBAC9B,YAAK,SAAS,CAAC,2BAA2B,uBACtC,YAAK,SAAS,CAAC,sCAAsC,CAAC,GAAG,CAAGjB,IAAI,CAAC0B,MAAM,GAAKpB,YAAY,CAAGN,IAAI,CAAC0B,MAAM,WAAMrB,KAAK,aAAKL,IAAI,CAAC0B,MAAM,CAAI,EAAE,EACrI,cACN,aAAK,SAAS,CAAC,6CAA6C,wBACxD,aAAM,SAAS,CAAC,4BAA4B,UAAG1B,IAAI,CAAC2B,cAAc,EAAS,cAC3E,cAAM,SAAS,CAAC,wCAAwC,WAAC,GAAC,CAAE3B,IAAI,CAAC4B,QAAQ,GAAS,cAClF,aAAM,SAAS,CAAC,iCAAiC,UAAG5B,IAAI,CAAC6B,KAAK,EAAS,GACrE,GACJ,GApBoF7B,IAAI,CAACa,iBAAiB,CAqB9G,CAEd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}