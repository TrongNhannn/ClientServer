{"ast":null,"code":"import _objectSpread from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import app_api from\"../../APP_API\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setAuth=_useState2[1];var _useSelector=useSelector(function(state){return state;}),Confirm=_useSelector.Confirm,Alert=_useSelector.Alert,pages=_useSelector.pages,proxy=_useSelector.proxy;var _useSelector2=useSelector(function(state){return state;}),unique_string=_useSelector2.unique_string;var dispatch=useDispatch();var cf=new Confirm(dispatch);var al=new Alert(dispatch);var enterTriggered=function enterTriggered(e){if(e.keyCode===13){submit();}};var submit=function submit(){// console.log(proxy)\nvar apiUrl=app_api();fetch(\"\".concat(apiUrl,\"/\").concat(unique_string,\"/login\"),{// fetch(`dipes/test/login`, {\nmethod:\"post\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(auth)}).then(function(res){return res.json();}).then(function(resp){var success=resp.success,role=resp.role,credential_string=resp.credential_string,_token=resp._token,redirectToImport=resp.redirectToImport;console.log(resp);if(success){localStorage.setItem('role',role);localStorage.setItem('credential_string',credential_string);localStorage.setItem('_token',_token);if(redirectToImport){window.location=\"/\";setTimeout(function(){al.warning(\"Warning!\",\"Chưa có dữ liệu\");},2000);}else{window.location=\"/su/users\";}}else{al.failure(\"Thất bại\",\"Đăng nhập thất bại\");}});};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed-default flex flex-aligned fullscreen login-bg overflow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-middle mg-auto login-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-60-pct mg-auto\",style:{paddingLeft:\"3em\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"block text-center upper text-20-px\",children:\"\\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-90-pct mg-auto m-t-5 flex flex-no-wrap flex-middle\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"T\\xE0i kho\\u1EA3n\",onKeyUp:enterTriggered,onChange:function onChange(e){setAuth(_objectSpread(_objectSpread({},auth),{},{account_string:e.target.value}));},type:\"text\",className:\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-90-pct mg-auto m-t-1 flex flex-no-wrap flex-middle\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"M\\u1EADt kh\\u1EA9u\",onKeyUp:enterTriggered,onChange:function onChange(e){setAuth(_objectSpread(_objectSpread({},auth),{},{pwd_string:e.target.value}));},type:\"password\",className:\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-90-pct mg-auto m-t-1 flex flex-no-wrap\",children:/*#__PURE__*/_jsx(\"button\",{className:\"sign-btn w-100-pct pointer\",onClick:submit,children:\"Ti\\u1EBFp t\\u1EE5c \\u27A4\"})})]})]})})});});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","app_api","auth","setAuth","state","Confirm","Alert","pages","proxy","unique_string","dispatch","cf","al","enterTriggered","e","keyCode","submit","apiUrl","fetch","method","headers","body","JSON","stringify","then","res","json","resp","success","role","credential_string","_token","redirectToImport","console","log","localStorage","setItem","window","location","setTimeout","warning","failure","paddingLeft","account_string","target","value","pwd_string"],"sources":["D:/Nhan/DIPE_V2/Client/ClientServer/APP/src/cpn/auth/login.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport app_api from \"../../APP_API\";\r\n\r\n\r\nexport default () => {\r\n    const [ auth, setAuth ] = useState({})\r\n    const {  Confirm, Alert, pages, proxy } = useSelector(state => state);\r\n    const { unique_string } = useSelector( state => state )\r\n    const dispatch = useDispatch()\r\n    const cf = new Confirm(dispatch)\r\n    const al = new Alert(dispatch)\r\n    const enterTriggered = (e) => {\r\n        if( e.keyCode === 13 ){\r\n            submit()\r\n        }\r\n    }\r\n\r\n    const submit = () => {\r\n        // console.log(proxy)\r\n        const apiUrl = app_api();\r\n         fetch(`${apiUrl}/${ unique_string }/login`, {\r\n            // fetch(`dipes/test/login`, {\r\n            method: \"post\",\r\n            headers: {\r\n                \"content-type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(auth)\r\n        }).then( res => res.json() ).then( ( resp ) => {\r\n            const { success, role, credential_string, _token, redirectToImport  } = resp;\r\n            console.log( resp )\r\n            if( success ){\r\n                localStorage.setItem( 'role', role )\r\n                localStorage.setItem( 'credential_string', credential_string )\r\n                localStorage.setItem( '_token', _token )\r\n                if (redirectToImport) {\r\n                    window.location = \"/\"; \r\n                    \r\n                    setTimeout(() => {\r\n                        al.warning(\"Warning!\",\"Chưa có dữ liệu\")\r\n                    }, 2000);\r\n                   \r\n                  } else {\r\n                    window.location = \"/su/users\";\r\n                  }\r\n            }else{\r\n               al.failure(\"Thất bại\",\"Đăng nhập thất bại\")\r\n            }\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div className=\"fixed-default flex flex-aligned fullscreen login-bg overflow\">\r\n            <div className=\"flex flex-middle mg-auto login-form\">\r\n                <div className=\"w-60-pct mg-auto\" style={{ paddingLeft: \"3em\" }}>\r\n                    <span className=\"block text-center upper text-20-px\">Đăng nhập</span>\r\n                    <div className=\"flex flex-wrap\">\r\n                        <div className=\"w-90-pct mg-auto m-t-5 flex flex-no-wrap flex-middle\">\r\n                            <input placeholder=\"Tài khoản\" onKeyUp={ enterTriggered } onChange={ (e) => { setAuth( { ...auth, account_string: e.target.value } ) } } type=\"text\" className=\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"/>\r\n                        </div>\r\n                        <div className=\"w-90-pct mg-auto m-t-1 flex flex-no-wrap flex-middle\">\r\n                            <input  placeholder=\"Mật khẩu\" onKeyUp={ enterTriggered } onChange={ (e) => { setAuth( { ...auth, pwd_string: e.target.value } ) } } type=\"password\" className=\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"/>\r\n                        </div>\r\n                        <div className=\"w-90-pct mg-auto m-t-1 flex flex-no-wrap\">\r\n                            <button className=\"sign-btn w-100-pct pointer\" onClick={ submit }>Tiếp tục ➤</button>\r\n                         </div>\r\n                        {/*<div className=\"w-90-pct mg-auto m-t-5 flex flex-no-wrap flex-middle\">\r\n                            <span className=\"block text-12-px text-right\">Khum có tài khoản ? <a href=\"/signup\" className=\"no-underline mylan-color pointer bold\">Đăng ký</a> ngay</span>\r\n                        </div> */}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}