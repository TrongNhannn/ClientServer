{"ast":null,"code":"import _toConsumableArray from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{v4 as uuidv4}from'uuid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(props){var version=props.version,project_id=props.project_id,tables=props.tables,closeDialog=props.closeDialog;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),proxy=_useSelector.proxy,unique_string=_useSelector.unique_string,collection=_useSelector.collection,collections=_useSelector.collections;var _useSelector2=useSelector(function(state){return state.functions;}),addApiToCollection=_useSelector2.addApiToCollection,auto_id=_useSelector2.auto_id;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),height=_useState2[0],setHeight=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),tablesHeight=_useState4[0],setTablesHeight=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filter=_useState6[0],setFilter=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),filtedTables=_useState8[0],setFiltedTables=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),selectedTables=_useState10[0],setSelectedTables=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),params=_useState12[0],setParams=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),filtedFields=_useState14[0],setFiltedFields=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),selectedFields=_useState16[0],setSelectedFields=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),customFields=_useState18[0],setCustomFields=_useState18[1];var criterias=[{id:1,label:\"GET\",value:\"get\"},{id:2,label:\"POST\",value:\"post\"},{id:3,label:\"PUT\",value:\"put\"},{id:4,label:\"DELETE\",value:\"delete\"}];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),drop=_useState20[0],setDrop=_useState20[1];var _useState21=useState({type:criterias[2],url:{},name:\"API mới nè\"}),_useState22=_slicedToArray(_useState21,2),api=_useState22[0],setApi=_useState22[1];var createUniqueURL=function createUniqueURL(baseURL){var uniqueID=uuidv4().replaceAll(\"-\",'');return{url:\"/api/\".concat(project_id,\"/\").concat(version.version_id,\"/\").concat(uniqueID),proxy:proxy,id_str:uniqueID};};useEffect(function(){setApi(_objectSpread(_objectSpread({},api),{},{url:createUniqueURL()}));},[version]);useEffect(function(){setFiltedTables(tables);},[tables]);var dropTables=function dropTables(){setDrop(!drop);};var submitApi=function submitApi(){var url=_objectSpread(_objectSpread({},api.url),{},{url:api.url.url+generateParams().url,params:params});var submitBody=_objectSpread(_objectSpread({},api),{},{tables:selectedTables,fields:selectedFields,collection:collection,url:url,status:false,fullurl:api.url.proxy+url.url,customFields:customFields});fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/apis/api\"),{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify({data:submitBody})}).then(function(res){return res.json();}).then(function(res){closeDialog();delete submitBody.collection;addApiToCollection(collections,collection,submitBody);});};var doesFieldBelongToTable=function doesFieldBelongToTable(field,table){var fields=table.fields;if(fields!=undefined){var existed=fields.filter(function(f){return f.field_id===field.field_id;});if(existed!=0){return true;}else{return false;}}else{return false;}};var filterAdd=function filterAdd(table){var newFiltedTables=filtedTables.filter(function(tb){return tb.table_id!=table.table_id;});setSelectedTables([].concat(_toConsumableArray(selectedTables),[table]));setFiltedTables(newFiltedTables);setFiltedFields([].concat(_toConsumableArray(filtedFields),_toConsumableArray(table.fields)));};var filterRemove=function filterRemove(table){// const newSelectedTables = selectedTables.filter( tb => tb.table_id != table.table_id );\n// setFiltedTables([ ...filtedTables, table ])\n// setSelectedTables(newSelectedTables)\n// const newFiltedFields = filtedFields.filter( f => !doesFieldBelongToTable( f, table ) );\n// setFiltedFields( newFiltedFields );\nsetFiltedTables([].concat(_toConsumableArray(filtedTables),_toConsumableArray(selectedTables)));setSelectedTables([]);setFiltedFields([]);setSelectedFields([]);};var haveFieldId=function haveFieldId(table,field_id){if(table.fields!=undefined){var fields=table.fields.filter(function(f){return f.field_id==field_id;});if(fields.length>0){return true;}else{return false;}}else{return false;}};var dependencedTablesFilter=function dependencedTablesFilter(field_id){var depenses=filtedTables.map(function(table){var constraint=table.constraint;if(constraint!=undefined){var dependExised=constraint.filter(function(constr){return constr.reference_on==field_id;}).length;if(dependExised!=0){return table;}else{return null;}}});return depenses.filter(function(d){return d!=null;});};var generateFiltedTables=function generateFiltedTables(){if(selectedTables.length>0){var showTables=filtedTables.map(function(table){for(var i=0;i<selectedTables.length;i++){var constraint=selectedTables[i].constraint;if(constraint!=undefined){for(var j=0;j<constraint.length;j++){var constr=constraint[j];if(haveFieldId(table,constr.reference_on)){return table;}}}}return null;});var dependencedTables=filtedTables.map(function(table){var resultTables=[];for(var i=0;i<selectedTables.length;i++){var constraint=selectedTables[i].constraint;if(constraint!=undefined){for(var j=0;j<constraint.length;j++){var constr=constraint[j];var constraint_type=constr.constraint_type,field_id=constr.field_id;if(constraint_type===\"pk\"){var dptb=dependencedTablesFilter(field_id);resultTables.push.apply(resultTables,_toConsumableArray(dptb));}}}}return resultTables;});var finalTables_1=showTables.filter(function(tb){return tb!=null;});var finalTables_2=dependencedTables.filter(function(tb){return tb!=null;});var finalTables_3=[];var finalTables_4=[];for(var i=0;i<finalTables_2.length;i++){var _tables=finalTables_2[i];finalTables_3.push.apply(finalTables_3,_toConsumableArray(_tables));}for(var _i=0;_i<finalTables_3.length;_i++){var table=finalTables_3[_i];if(finalTables_4.indexOf(table)===-1){finalTables_4.push(table);}}return[].concat(_toConsumableArray(finalTables_1),finalTables_4).map(function(table){return/*#__PURE__*/_jsx(\"div\",{className:\"p-1 border-1 m-1 pointer shadow-blur shadow-hover\",onClick:function onClick(){filterAdd(table);},children:/*#__PURE__*/_jsx(\"span\",{className:\"p-0-5\",children:table.table_name})},table.table_id);});}else{return filtedTables.map(function(table){return/*#__PURE__*/_jsx(\"div\",{className:\"p-1 border-1 m-1 pointer shadow-blur shadow-hover\",onClick:function onClick(){filterAdd(table);},children:/*#__PURE__*/_jsx(\"span\",{className:\"p-0-5\",children:table.table_name})},table.table_id);});}};var pkExisted=function pkExisted(fk){var reference_on=fk.reference_on;var pk=selectedFields.filter(function(field){return field.field_id==reference_on;});if(pk!=undefined&&pk.length>0){return true;}return false;};var fieldSelecting=function fieldSelecting(field){var fieldConstraints=field.constraints;if(fieldConstraints){var fieldFK=fieldConstraints.filter(function(fc){return fc.constraint_type==\"fk\";});if(fieldFK!=undefined&&fieldFK.length>0&&pkExisted(fieldFK[0])){alert(\"Trường này bị zô hiệu vì khóa chính của nó đang trong danh sách được chọn!\");}else{if(selectedFields.indexOf(field)==-1){setSelectedFields([].concat(_toConsumableArray(selectedFields),[field]));}}}else{if(selectedFields.indexOf(field)==-1){setSelectedFields([].concat(_toConsumableArray(selectedFields),[field]));}}};var fieldDisselecting=function fieldDisselecting(field){var newSelectedFields=selectedFields.filter(function(f){return f.field_id!=field.field_id;});var newParams=params.filter(function(f){return f.field_id!=field.field_id;});setSelectedFields(_toConsumableArray(newSelectedFields));setParams(newParams);};var generateParams=function generateParams(){var paramNames=params.map(function(field){var splitted_name=field.field_name.split(' ');return\":\".concat(splitted_name.join('_'));});var paramAlias=params.map(function(field){return\":\".concat(field.field_alias);});return{display:'/'+paramNames.join('/'),url:'/'+paramAlias.join('/')};};var addOrRemoveFromURLParams=function addOrRemoveFromURLParams(e,field){e.preventDefault();if(params.indexOf(field)!=-1){var newParams=params.filter(function(f){return f.field_id!=field.field_id;});setParams(newParams);}else{setParams([].concat(_toConsumableArray(params),[field]));}};var addCustomFields=function addCustomFields(){var newFieldAlias=auto_id();var cusField={name:\"Trường mới\",field_alias:newFieldAlias,fomular:\"\"};setCustomFields([].concat(_toConsumableArray(customFields),[cusField]));};var updateCustomField=function updateCustomField(field,field_type,value){field[field_type]=value;var newCustomFields=customFields.map(function(f){if(f.field_alias===field.field_alias){return field;}else{return f;}});setCustomFields(newCustomFields);};var updateField=function updateField(field,field_type,value){field[field_type]=value;var newCustomFields=selectedFields.map(function(f){if(f.field_alias===field.field_alias){return field;}else{return f;}});setSelectedFields(newCustomFields);};/* Em da lo yeu nguoi khong thuong em */ /*\r\n        Chia cai chon bang voi chon truong ra troi oi\r\n    */return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed-default z-index-11 fullscreen p-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"rel z-index-2 container bg-white h-fit column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"column w-100-pct h-fit p-0-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-no-wrap border-1-bottom\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fill-available p-t-1 p-b-0-5\",children:/*#__PURE__*/_jsx(\"input\",{className:\"no-border w-100-pct text-24-px\",value:api.name,onChange:function onChange(e){setApi(_objectSpread(_objectSpread({},api),{},{name:e.target.value}));},placeholder:\"API name here\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-100-px flex flex-middle\",children:/*#__PURE__*/_jsx(\"button\",{className:\"no-border w-100-pct text-center pointer block p-0-5 text-16-px\",children:api.type.label})}),/*#__PURE__*/_jsxs(\"div\",{className:\"fill-available flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-max-content\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-16-px block p-1\",children:[\"Proxy: \",/*#__PURE__*/_jsx(\"b\",{children:api.url.proxy})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-max-content\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-16-px block p-1\",children:[\"URL: \",/*#__PURE__*/_jsx(\"b\",{children:api.url.url+generateParams().display})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rel z-index-9\",children:/*#__PURE__*/_jsx(\"div\",{className:\"abs t-0 l-0 bg-white \"+(height!=0?\" shadow-blur\":\"\"),children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100-px overflow ease\",style:{height:height},children:criterias.map(function(d,index){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"block p-0-5 bg-white pointer hover\",onClick:function onClick(){setHeight(0);setApi(_objectSpread(_objectSpread({},api),{},{type:d}));},children:d[\"label\"]})},index);})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-100-pct flex-no-wrap p-0-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fill-available flex flex-no-wrap scroll-x\",children:selectedTables.map(function(table){return/*#__PURE__*/_jsx(\"div\",{className:\"p-1 w-max-content border-1 m-1 pointer shadow-blur shadow-hover\",onClick:function onClick(){filterRemove(table);},children:/*#__PURE__*/_jsx(\"span\",{className:\"p-0-5\",children:table.table_name})},table.table_id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-48-px flex flex-middle\",children:/*#__PURE__*/_jsx(\"button\",{onClick:dropTables,className:\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\",style:{width:\"32px\",height:\"32px\"},children:drop?\"–\":\"+\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"rel z-index-8 w-100-pct\",children:/*#__PURE__*/_jsx(\"div\",{className:\"abs-default w-100-pct shadow-blur ease bg-white no-overflow\",style:{height:drop?350:0},children:/*#__PURE__*/_jsx(\"div\",{className:\"w-100-pct overflow\",style:{height:350},children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap\",children:generateFiltedTables()})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-1 fill-available\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap h-fit\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct p-1 h-fit overflow\",style:{height:\"400px\"},children:selectedTables.map(function(table){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-0-5 bg-white shadow-blur m-t-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block text-20-px\",children:table.table_name}),table.fields.map(function(field){return/*#__PURE__*/_jsx(\"div\",{className:\"m-t-1 pointer\",onClick:function onClick(){fieldSelecting(field);},children:/*#__PURE__*/_jsx(\"span\",{className:\"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\",children:field.field_name})},field.field_id);})]});})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-50-pct p-1 h-fit overflow\",style:{height:\"400px\"},children:selectedFields.map(function(field){return/*#__PURE__*/_jsx(\"div\",{className:\"m-t-1 pointer\",onClick:function onClick(){fieldDisselecting(field);},onContextMenu:function onContextMenu(e){addOrRemoveFromURLParams(e,field);},children:/*#__PURE__*/_jsx(\"span\",{className:\"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\",children:field.field_name})},field.field_id);})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"border-1-top\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"abs b-0 r-0 p-1\",children:/*#__PURE__*/_jsx(\"button\",{onClick:submitApi,className:\"upper pointer block w-max-content white text-center p-t-0-5 p-b-0-5 p-l-1 p-r-1 no-border bg-green\",children:\"Th\\xEAm\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"abs-default z-index-1 fullscreen trans-dark\",onClick:closeDialog})]});});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","v4","uuidv4","props","version","project_id","tables","closeDialog","dispatch","state","proxy","unique_string","collection","collections","functions","addApiToCollection","auto_id","height","setHeight","tablesHeight","setTablesHeight","filter","setFilter","filtedTables","setFiltedTables","selectedTables","setSelectedTables","params","setParams","filtedFields","setFiltedFields","selectedFields","setSelectedFields","customFields","setCustomFields","criterias","id","label","value","drop","setDrop","type","url","name","api","setApi","createUniqueURL","baseURL","uniqueID","replaceAll","version_id","id_str","dropTables","submitApi","generateParams","submitBody","fields","status","fullurl","fetch","method","headers","body","JSON","stringify","data","then","res","json","doesFieldBelongToTable","field","table","undefined","existed","f","field_id","filterAdd","newFiltedTables","tb","table_id","filterRemove","haveFieldId","length","dependencedTablesFilter","depenses","map","constraint","dependExised","constr","reference_on","d","generateFiltedTables","showTables","i","j","dependencedTables","resultTables","constraint_type","dptb","push","finalTables_1","finalTables_2","finalTables_3","finalTables_4","indexOf","table_name","pkExisted","fk","pk","fieldSelecting","fieldConstraints","constraints","fieldFK","fc","alert","fieldDisselecting","newSelectedFields","newParams","paramNames","splitted_name","field_name","split","join","paramAlias","field_alias","display","addOrRemoveFromURLParams","e","preventDefault","addCustomFields","newFieldAlias","cusField","fomular","updateCustomField","field_type","newCustomFields","updateField","target","index","width"],"sources":["D:/Nhan/DIPE_V2/Client/DIPE/APP/src/cpn/client/version/methods/put.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport default ( props ) => {\r\n\r\n    const { version, project_id, tables, closeDialog } = props;\r\n    const dispatch = useDispatch()\r\n    const { proxy, unique_string, collection, collections } = useSelector(state => state);\r\n    const { addApiToCollection, auto_id } = useSelector( state => state.functions );\r\n    const [ height, setHeight ] = useState(0);\r\n    const [ tablesHeight, setTablesHeight ] = useState(0);\r\n\r\n    const [ filter, setFilter ] = useState([])\r\n    const [ filtedTables, setFiltedTables ] = useState([]);\r\n    const [ selectedTables, setSelectedTables ] = useState([])\r\n    const [ params, setParams ] = useState([])\r\n    const [ filtedFields, setFiltedFields ] = useState([]);\r\n    const [ selectedFields, setSelectedFields ] = useState([]);\r\n    const [ customFields, setCustomFields ] = useState([]);\r\n\r\n    const criterias = [\r\n        { id: 1, label: \"GET\", value: \"get\" },\r\n        { id: 2, label: \"POST\", value: \"post\" },\r\n        { id: 3, label: \"PUT\", value: \"put\" },\r\n        { id: 4, label: \"DELETE\", value: \"delete\" },\r\n    ]\r\n\r\n    const [ drop, setDrop ] = useState(false);\r\n\r\n    const [ api, setApi ] = useState({\r\n        type: criterias[2],\r\n        url: {},\r\n        name: \"API mới nè\"\r\n    })\r\n\r\n\r\n    const createUniqueURL = (baseURL) => {\r\n        const uniqueID = uuidv4().replaceAll(\"-\", '');\r\n        return { url: `/api/${ project_id }/${version.version_id}/${uniqueID}`, proxy, id_str: uniqueID };\r\n    }\r\n\r\n    useEffect( () => {\r\n        setApi({ ...api, url: createUniqueURL() })\r\n    }, [ version ])\r\n\r\n    useEffect(() => {\r\n        setFiltedTables(tables)\r\n    }, [tables])\r\n\r\n    const dropTables = () => {\r\n        setDrop( !drop )\r\n    }\r\n\r\n    const submitApi = () => {\r\n        const url = { ...api.url, url: api.url.url + generateParams().url, params }\r\n        const submitBody = {\r\n            ...api,\r\n            tables: selectedTables,\r\n            fields: selectedFields,\r\n            collection,\r\n            url,\r\n            status: false,\r\n            fullurl: api.url.proxy + url.url,\r\n            customFields\r\n        }\r\n\r\n        fetch(`${proxy}/api/${ unique_string }/apis/api`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"content-type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({ data: submitBody })\r\n        }).then( res => res.json() ).then( res => {\r\n            closeDialog()\r\n            delete submitBody.collection;\r\n            addApiToCollection( collections, collection, submitBody )\r\n        })\r\n    }\r\n\r\n    const doesFieldBelongToTable = (field, table) => {\r\n        const { fields } = table;\r\n        if( fields != undefined ){\r\n            const existed = fields.filter( f => f.field_id === field.field_id );\r\n            if( existed != 0 ){\r\n                return true\r\n            }else{\r\n                return false\r\n            }\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const filterAdd = ( table ) => {\r\n        const newFiltedTables = filtedTables.filter( tb => tb.table_id != table.table_id );\r\n        setSelectedTables([ ...selectedTables, table ])\r\n        setFiltedTables(newFiltedTables)\r\n        setFiltedFields([ ...filtedFields, ...table.fields ])\r\n    }\r\n    const filterRemove = ( table ) => {\r\n        // const newSelectedTables = selectedTables.filter( tb => tb.table_id != table.table_id );\r\n        // setFiltedTables([ ...filtedTables, table ])\r\n        // setSelectedTables(newSelectedTables)\r\n        // const newFiltedFields = filtedFields.filter( f => !doesFieldBelongToTable( f, table ) );\r\n        // setFiltedFields( newFiltedFields );\r\n\r\n\r\n        setFiltedTables([ ...filtedTables, ...selectedTables ])\r\n        setSelectedTables([ ])\r\n        setFiltedFields( [  ] );\r\n        setSelectedFields([ ])\r\n    }\r\n\r\n    const haveFieldId = ( table, field_id ) => {\r\n        if( table.fields != undefined ){\r\n            const fields = table.fields.filter( f => f.field_id == field_id );\r\n            if( fields.length > 0 ){\r\n                return true\r\n            }else{\r\n                return false\r\n            }\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const dependencedTablesFilter = ( field_id ) => {\r\n        const depenses = filtedTables.map( table => {\r\n            const { constraint } = table;\r\n            if( constraint != undefined ){\r\n                const dependExised = constraint.filter( constr => constr.reference_on == field_id).length;\r\n                if( dependExised != 0 ){\r\n                    return table;\r\n                }else{\r\n                    return null;\r\n                }\r\n            }\r\n        })\r\n        return depenses.filter( d => d != null )\r\n    }\r\n\r\n    const generateFiltedTables = () => {\r\n        if( selectedTables.length > 0 ){\r\n\r\n            const showTables = filtedTables.map( table => {\r\n\r\n                for( let i = 0; i < selectedTables.length; i++ ){\r\n                    const { constraint } = selectedTables[i];\r\n\r\n                    if( constraint != undefined ){\r\n\r\n                        for( let j = 0; j < constraint.length; j++){\r\n\r\n                            const constr = constraint[j];\r\n                            if( haveFieldId( table, constr.reference_on ) ){\r\n                                return table\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return null\r\n            })\r\n\r\n            const dependencedTables = filtedTables.map( table => {\r\n                const resultTables = []\r\n                for( let i = 0; i < selectedTables.length; i++ ){\r\n                    const { constraint } = selectedTables[i];\r\n\r\n                    if( constraint != undefined ){\r\n\r\n                        for( let j = 0; j < constraint.length; j++){\r\n\r\n                            const constr = constraint[j];\r\n                            const { constraint_type, field_id } = constr\r\n                            if( constraint_type === \"pk\" ){\r\n                                const dptb = dependencedTablesFilter( field_id );\r\n                                resultTables.push(...dptb)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return resultTables\r\n            })\r\n\r\n            const finalTables_1 = showTables.filter( tb => tb != null );\r\n            const finalTables_2 = dependencedTables.filter( tb => tb != null );\r\n            const finalTables_3 = []\r\n            const finalTables_4 = []\r\n            for( let i = 0; i < finalTables_2.length; i++ ){\r\n                const tables = finalTables_2[i];\r\n                finalTables_3.push(...tables)\r\n            }\r\n            for( let i = 0; i < finalTables_3.length; i++ ){\r\n                const table = finalTables_3[i];\r\n                if( finalTables_4.indexOf( table ) === -1 ){\r\n                    finalTables_4.push( table )\r\n                }\r\n            }\r\n\r\n            return [ ...finalTables_1, ...finalTables_4 ].map( table =>\r\n                <div key={ table.table_id } className=\"p-1 border-1 m-1 pointer shadow-blur shadow-hover\" onClick={ () => { filterAdd(table) } }>\r\n                    <span className=\"p-0-5\">{ table.table_name }</span>\r\n                </div>\r\n            )\r\n        }else{\r\n\r\n            return filtedTables.map( table =>\r\n                <div key={ table.table_id } className=\"p-1 border-1 m-1 pointer shadow-blur shadow-hover\" onClick={ () => { filterAdd(table) } }>\r\n                    <span className=\"p-0-5\">{ table.table_name }</span>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    const pkExisted = (fk) => {\r\n        const { reference_on } = fk;\r\n        const pk = selectedFields.filter( field => field.field_id == reference_on )\r\n        if( pk != undefined && pk.length > 0 ){\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    const fieldSelecting = ( field ) => {\r\n        const fieldConstraints = field.constraints;\r\n        if( fieldConstraints ){\r\n\r\n            const fieldFK = fieldConstraints.filter( fc => fc.constraint_type == \"fk\" );\r\n            if( fieldFK != undefined && fieldFK.length > 0 && pkExisted(fieldFK[0]) ){\r\n                alert(\"Trường này bị zô hiệu vì khóa chính của nó đang trong danh sách được chọn!\")\r\n            }else{\r\n                if( selectedFields.indexOf( field) == -1 ){\r\n                    setSelectedFields( [ ...selectedFields, field ] )\r\n                }\r\n            }\r\n        }else{\r\n            if( selectedFields.indexOf( field) == -1 ){\r\n                setSelectedFields( [ ...selectedFields, field ] )\r\n            }\r\n        }\r\n    }\r\n\r\n    const fieldDisselecting = ( field ) => {\r\n        const newSelectedFields = selectedFields.filter( f => f.field_id != field.field_id );\r\n        const newParams = params.filter( f => f.field_id != field.field_id )\r\n        setSelectedFields( [...newSelectedFields] )\r\n        setParams(newParams)\r\n    }\r\n\r\n    const generateParams = () => {\r\n        const paramNames = params.map( field => {\r\n            const splitted_name = field.field_name.split(' ');\r\n            return `:${splitted_name.join('_')}`\r\n        })\r\n\r\n        const paramAlias = params.map( field => {\r\n            return `:${ field.field_alias }`\r\n        })\r\n\r\n        return {\r\n            display: '/' + paramNames.join('/'),\r\n            url: '/' + paramAlias.join('/'),\r\n        }\r\n    }\r\n\r\n    const addOrRemoveFromURLParams = ( e, field ) => {\r\n        e.preventDefault()\r\n        if( params.indexOf( field ) != -1 ){\r\n            const newParams = params.filter( f => f.field_id != field.field_id )\r\n            setParams(newParams)\r\n\r\n        }else{\r\n            setParams([ ...params, field ])\r\n        }\r\n    }\r\n\r\n    const addCustomFields = () => {\r\n        const newFieldAlias = auto_id()\r\n        const cusField = {\r\n            name: \"Trường mới\",\r\n            field_alias: newFieldAlias,\r\n            fomular: \"\"\r\n        }\r\n        setCustomFields([...customFields, cusField])\r\n    }\r\n\r\n    const updateCustomField = ( field, field_type, value ) => {\r\n        field[ field_type ] = value\r\n        const newCustomFields = customFields.map( f => {\r\n            if( f.field_alias === field.field_alias ){\r\n                return field;\r\n            }else{\r\n                return f\r\n            }\r\n        })\r\n        setCustomFields( newCustomFields )\r\n    }\r\n\r\n    const updateField = ( field, field_type, value ) => {\r\n        field[ field_type ] = value\r\n        const newCustomFields = selectedFields.map( f => {\r\n            if( f.field_alias === field.field_alias ){\r\n                return field;\r\n            }else{\r\n                return f\r\n            }\r\n        })\r\n        setSelectedFields( newCustomFields )\r\n    }\r\n\r\n    /* Em da lo yeu nguoi khong thuong em */\r\n    /*\r\n        Chia cai chon bang voi chon truong ra troi oi\r\n    */\r\n\r\n    return(\r\n        <div className=\"fixed-default z-index-11 fullscreen p-1\">\r\n            <div className=\"rel z-index-2 container bg-white h-fit column\">\r\n                <div className=\"column w-100-pct h-fit p-0-5\">\r\n                    <div className=\"flex flex-no-wrap border-1-bottom\">\r\n                        <div className=\"fill-available p-t-1 p-b-0-5\">\r\n                            <input className=\"no-border w-100-pct text-24-px\" value={ api.name }\r\n                                onChange = { (e) => { setApi({ ...api, name: e.target.value }) } } placeholder=\"API name here\"/>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-no-wrap\">\r\n                        <div className=\"w-100-px flex flex-middle\">\r\n                            <button className=\"no-border w-100-pct text-center pointer block p-0-5 text-16-px\">{ api.type.label }</button>\r\n                        </div>\r\n                        <div className=\"fill-available flex flex-wrap\">\r\n                            <div className=\"w-max-content\">\r\n                                <span className=\"text-16-px block p-1\">Proxy: <b>{ api.url.proxy }</b></span>\r\n                            </div>\r\n                            <div className=\"w-max-content\">\r\n                                <span className=\"text-16-px block p-1\">URL: <b>{ api.url.url + generateParams().display }</b></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"rel z-index-9\">\r\n                        <div className={\"abs t-0 l-0 bg-white \" + ( height != 0 ? \" shadow-blur\": \"\" )}>\r\n                            <div className=\"w-100-px overflow ease\" style={{ height }}>\r\n                            { criterias.map( (d, index) =>\r\n                                 <div key={ index }>\r\n                                    <span className=\"block p-0-5 bg-white pointer hover\"\r\n                                        onClick={ () => { setHeight(0); setApi({...api, type: d}) } }\r\n                                    >{ d[ \"label\" ] }</span>\r\n                                 </div>\r\n                              )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex w-100-pct flex-no-wrap p-0-5\">\r\n                        <div className=\"fill-available flex flex-no-wrap scroll-x\">\r\n                            { selectedTables.map( table =>\r\n                                <div key={ table.table_id } className=\"p-1 w-max-content border-1 m-1 pointer shadow-blur shadow-hover\" onClick={ () => { filterRemove(table) } }>\r\n                                    <span className=\"p-0-5\">{ table.table_name }</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"w-48-px flex flex-middle\">\r\n                            <button onClick={ dropTables } className=\"bold text-24-px no-border bg-green white border-radius-50-pct pointer\" style={{ width: \"32px\", height: \"32px\" }}>{ drop ? \"–\": \"+\" }</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"rel z-index-8 w-100-pct\">\r\n                        <div className=\"abs-default w-100-pct shadow-blur ease bg-white no-overflow\" style={{ height: drop ? 350: 0 }}>\r\n                            <div className=\"w-100-pct overflow\" style={{ height: 350 }}>\r\n                                <div className=\"flex flex-wrap\">\r\n                                    { generateFiltedTables() }\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"p-1 fill-available\">\r\n\r\n                        <div>\r\n                            <div className=\"flex flex-no-wrap h-fit\">\r\n                                <div className=\"w-50-pct p-1 h-fit overflow\" style={{ height: \"400px\" }}>\r\n                                    { selectedTables.map( table =>\r\n                                        <div className=\"p-0-5 bg-white shadow-blur m-t-2\">\r\n                                            <span className=\"block text-20-px\">{ table.table_name }</span>\r\n                                        { table.fields.map( field =>\r\n                                            <div key={field.field_id} className=\"m-t-1 pointer\" onClick={ () => { fieldSelecting( field ) } }>\r\n                                                <span className=\"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\">{ field.field_name }</span>\r\n                                            </div>\r\n                                         ) }\r\n                                        </div>\r\n                                    ) }\r\n                                </div>\r\n                                <div className=\"w-50-pct p-1 h-fit overflow\" style={{ height: \"400px\" }}>\r\n                                    { selectedFields.map( field =>\r\n                                        <div key={field.field_id} className=\"m-t-1 pointer\"\r\n                                            onClick={ () => { fieldDisselecting( field ) } }\r\n                                            onContextMenu={ (e) => { addOrRemoveFromURLParams( e, field ) } }\r\n                                        >\r\n                                            <span className=\"block hover text-16-px p-1 w-100-pct bg-white shadow-blur\">{ field.field_name }</span>\r\n                                        </div>\r\n                                    ) }\r\n                                </div>\r\n                            </div>\r\n                            <hr className=\"border-1-top\"/>\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n                <div className=\"abs b-0 r-0 p-1\">\r\n                    <button onClick={ submitApi } className=\"upper pointer block w-max-content white text-center p-t-0-5 p-b-0-5 p-l-1 p-r-1 no-border bg-green\">Thêm</button>\r\n                </div>\r\n            </div>\r\n            <div className=\"abs-default z-index-1 fullscreen trans-dark\" onClick={ closeDialog }></div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}