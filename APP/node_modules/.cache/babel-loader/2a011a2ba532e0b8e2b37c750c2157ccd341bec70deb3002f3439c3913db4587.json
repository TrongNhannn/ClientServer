{"ast":null,"code":"import _regeneratorRuntime from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Nhan/DIPE_V2/Client/ClientServer/APP/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Navbar,Horizon}from'../../navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),navState=_useSelector.navState;var _useSelector2=useSelector(function(state){return state.navbarLinks.admin;}),urls=_useSelector2.urls,bottomUrls=_useSelector2.bottomUrls;var handleFileUpload=function handleFileUpload(event){var file=event.target.files[0];if(file){var reader=new FileReader();reader.onload=function(e){try{var json=JSON.parse(e.target.result);saveJsonToFile(json);}catch(error){alert('Không thể đọc file JSON');}};reader.readAsText(file);}};var saveJsonToFile=function saveJsonToFile(json){var fileName='new_file.json';var data=JSON.stringify(json,null,2);var blob=new Blob([data],{type:'application/json'});var url=URL.createObjectURL(blob);var link=document.createElement('a');link.href=url;link.download=fileName;link.click();URL.revokeObjectURL(url);};var importData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(uploadedJson){_context.next=3;break;}alert('Vui lòng tải lên một file JSON trước khi import');return _context.abrupt(\"return\");case 3:_context.prev=3;_context.next=6;return fetch('YOUR_API_ENDPOINT',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(uploadedJson)});case 6:response=_context.sent;if(response.ok){alert('Dữ liệu đã được import thành công');}else{alert('Đã xảy ra lỗi khi import dữ liệu');}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);console.error(_context.t0);alert('Đã xảy ra lỗi khi import dữ liệu');case 14:case\"end\":return _context.stop();}},_callee,null,[[3,10]]);}));return function importData(){return _ref.apply(this,arguments);};}();useEffect(function(){dispatch({type:\"setNavBarHighLight\",payload:{url_id:0}});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed-default fullscreen main-bg overflow flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(Navbar,{urls:urls,bottomUrls:bottomUrls}),/*#__PURE__*/_jsxs(\"div\",{className:\"app fixed-default overflow \".concat(!navState?\"app-stretch\":\"app-scaled\"),style:{height:\"100vh\"},children:[/*#__PURE__*/_jsx(Horizon,{}),/*#__PURE__*/_jsx(\"span\",{className:\"text-24-px p-1\",children:\"Admin home \\u01B0\"}),/*#__PURE__*/_jsxs(\"div\",{style:{height:\"200vh\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json\",onChange:handleFileUpload}),/*#__PURE__*/_jsx(\"button\",{onClick:importData,children:\"Import\"})]})]})]});});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","Navbar","Horizon","dispatch","state","navState","navbarLinks","admin","urls","bottomUrls","handleFileUpload","event","file","target","files","reader","FileReader","onload","e","json","JSON","parse","result","saveJsonToFile","error","alert","readAsText","fileName","data","stringify","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","click","revokeObjectURL","importData","uploadedJson","fetch","method","headers","body","response","ok","console","payload","url_id","height"],"sources":["D:/Nhan/DIPE_V2/Client/ClientServer/APP/src/cpn/client/home/adminhome.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { Navbar, Horizon } from '../../navbar';\r\n\r\nexport default () => {\r\n    const dispatch = useDispatch();\r\n    const { navState } = useSelector(state => state);\r\n\r\n    const { urls, bottomUrls } = useSelector(state => state.navbarLinks.admin)\r\n    const handleFileUpload = (event) => {\r\n        const file = event.target.files[0];\r\n      \r\n        if (file) {\r\n          const reader = new FileReader();\r\n      \r\n          reader.onload = (e) => {\r\n            try {\r\n              const json = JSON.parse(e.target.result);\r\n              saveJsonToFile(json);\r\n            } catch (error) {\r\n              alert('Không thể đọc file JSON');\r\n            }\r\n          };\r\n      \r\n          reader.readAsText(file);\r\n        }\r\n      };\r\n      \r\n      const saveJsonToFile = (json) => {\r\n        const fileName = 'new_file.json';\r\n        const data = JSON.stringify(json, null, 2);\r\n        const blob = new Blob([data], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n      \r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = fileName;\r\n        link.click();\r\n      \r\n        URL.revokeObjectURL(url);\r\n      };\r\n      const importData = async () => {\r\n        if (!uploadedJson) {\r\n          alert('Vui lòng tải lên một file JSON trước khi import');\r\n          return;\r\n        }\r\n    \r\n        // Gửi dữ liệu JSON đến API của bạn ở đây\r\n        try {\r\n          const response = await fetch('YOUR_API_ENDPOINT', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(uploadedJson),\r\n          });\r\n    \r\n          if (response.ok) {\r\n            alert('Dữ liệu đã được import thành công');\r\n          } else {\r\n            alert('Đã xảy ra lỗi khi import dữ liệu');\r\n          }\r\n        } catch (error) {\r\n          console.error(error);\r\n          alert('Đã xảy ra lỗi khi import dữ liệu');\r\n        }\r\n      };\r\n    useEffect(() => {\r\n        dispatch({\r\n            type: \"setNavBarHighLight\",\r\n            payload: { url_id: 0 }\r\n        })\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"fixed-default fullscreen main-bg overflow flex flex-no-wrap\">\r\n            <Navbar urls={urls} bottomUrls={bottomUrls} />\r\n            <div className={`app fixed-default overflow ${!navState ? \"app-stretch\" : \"app-scaled\"}`} style={{ height: \"100vh\" }}>\r\n                <Horizon />\r\n               \r\n                <span className=\"text-24-px p-1\">Admin home\r\n                ư\r\n                </span>\r\n                <div style={{ height: \"200vh\" }}>\r\n<input type=\"file\" accept=\".json\" onChange={handleFileUpload} />\r\n                <button onClick={importData}>Import</button>\r\n                </div>\r\n\r\n\r\n\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}