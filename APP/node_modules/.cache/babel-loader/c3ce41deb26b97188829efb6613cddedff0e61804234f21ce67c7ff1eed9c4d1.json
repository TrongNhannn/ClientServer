{"ast":null,"code":"import _toConsumableArray from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Navbar,Horizon}from'../../navbar';import UsersMapper from'./usersMapper';import AddUserBox from'./adduser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.navbarLinks.su;}),urls=_useSelector.urls,bottomUrls=_useSelector.bottomUrls;var _useSelector2=useSelector(function(state){return state;}),navState=_useSelector2.navState,unique_string=_useSelector2.unique_string,proxy=_useSelector2.proxy;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),sus=_useState2[0],setSus=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),admins=_useState4[0],setAdmins=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),userAdd=_useState8[0],setUserAdd=_useState8[1];useEffect(function(){dispatch({type:\"setNavBarHighLight\",payload:{url_id:2}});fetch(\"\".concat(proxy,\"/api/\").concat(unique_string,\"/user/getall\")).then(function(res){return res.json();}).then(function(resp){var data=resp.data,success=resp.success;if(data!=undefined&&data.length>0){var _sus=data.filter(function(user){return user.account_role===\"su\";});var _admins=data.filter(function(user){return user.account_role===\"admin\";});var _users=data.filter(function(user){return user.account_role===\"user\";});setSus(_sus);setAdmins(_admins);setUsers(_users);}});},[]);var userSplitter=function userSplitter(user){var account_role=user.account_role;switch(account_role){case\"su\":setSus([].concat(_toConsumableArray(sus),[user]));break;case\"admin\":setAdmins([].concat(_toConsumableArray(admins),[user]));break;default:setUsers([].concat(_toConsumableArray(users),[user]));}};var removeFromUI=function removeFromUI(user){var account_role=user.account_role;switch(account_role){case\"su\":var newSus=sus.filter(function(su){return su.credential_string!=user.credential_string;});setSus(_toConsumableArray(newSus));break;case\"admin\":var newAdmins=admins.filter(function(admin){return admin.credential_string!=user.credential_string;});setAdmins(_toConsumableArray(newAdmins));break;default:var newUsers=users.filter(function(u){return u.credential_string!=user.credential_string;});setUsers(_toConsumableArray(newUsers));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed-default fullscreen main-bg overflow flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(Navbar,{urls:urls,bottomUrls:bottomUrls}),/*#__PURE__*/_jsxs(\"div\",{className:\"app fixed-default overflow \".concat(!navState?\"app-stretch\":\"app-scaled\"),style:{height:\"100vh\"},children:[/*#__PURE__*/_jsx(Horizon,{}),/*#__PURE__*/_jsx(AddUserBox,{userAdd:userAdd,setUserAdd:setUserAdd,setUsers:userSplitter}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-100-pct bg-white p-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-no-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-100-pct flex flex-no-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24-px flex flex-middle\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/assets/icon/search.png\",className:\"w-100-pct block\"})}),/*#__PURE__*/_jsx(\"input\",{className:\"no-border w-100-pct p-l-2\",placeholder:\"T\\xECm ki\\u1EBFm ai \\u0111\\xF3...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setUserAdd(true);},className:\"upper pointer block w-max-content white text-center p-t-0-5 p-b-0-5 p-l-1 p-r-1 no-border bg-green\",children:\"Th\\xEAm m\\u1EDBi\"})})]})}),/*#__PURE__*/_jsx(UsersMapper,{label:\"Super Users ( su )\",users:sus,removeFromUI:removeFromUI}),/*#__PURE__*/_jsx(UsersMapper,{label:\"Quản trị viên ( admin )\",users:admins,removeFromUI:removeFromUI}),/*#__PURE__*/_jsx(UsersMapper,{label:\"Người dùng ( user )\",users:users,removeFromUI:removeFromUI})]})]})]});});","map":{"version":3,"names":["useState","useEffect","useDispatch","useSelector","Navbar","Horizon","UsersMapper","AddUserBox","dispatch","state","navbarLinks","su","urls","bottomUrls","navState","unique_string","proxy","sus","setSus","admins","setAdmins","users","setUsers","userAdd","setUserAdd","type","payload","url_id","fetch","then","res","json","resp","data","success","undefined","length","_sus","filter","user","account_role","_admins","_users","userSplitter","removeFromUI","newSus","credential_string","newAdmins","admin","newUsers","u","height"],"sources":["D:/Nhan/DIPE_V2/Client/DIPE/APP/src/cpn/client/users/suusers.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { Navbar, Horizon } from '../../navbar';\r\nimport UsersMapper from './usersMapper';\r\nimport AddUserBox from './adduser';\r\n\r\nexport default () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const { urls, bottomUrls } = useSelector( state => state.navbarLinks.su )\r\n    const { navState, unique_string, proxy } = useSelector( state => state );\r\n\r\n    const [ sus, setSus ] = useState([]);\r\n    const [ admins, setAdmins ] = useState([]);\r\n    const [ users, setUsers ] = useState([]);\r\n    const [ userAdd, setUserAdd ] = useState(false);\r\n\r\n    useEffect( () => {\r\n        dispatch({\r\n            type: \"setNavBarHighLight\",\r\n            payload: { url_id: 2 }\r\n        })\r\n\r\n        fetch(`${proxy}/api/${ unique_string}/user/getall`).then( res => res.json() )\r\n        .then( resp => {\r\n            const { data, success } = resp;\r\n\r\n            if( data != undefined && data.length > 0 ) {\r\n                const _sus = data.filter( user => user.account_role === \"su\" );\r\n                const _admins = data.filter( user => user.account_role === \"admin\" );\r\n                const _users = data.filter( user => user.account_role === \"user\" );\r\n\r\n                setSus( _sus ); setAdmins( _admins ); setUsers( _users )\r\n            }\r\n        })\r\n    }, [])\r\n\r\n    const userSplitter = (user) => {\r\n        const { account_role } = user;\r\n        switch (account_role) {\r\n            case \"su\":\r\n                setSus( [...sus, user] )\r\n                break;\r\n\r\n            case \"admin\":\r\n                setAdmins( [...admins, user] )\r\n                break;\r\n            default:\r\n                setUsers([ ...users, user ])\r\n        }\r\n    }\r\n\r\n    const removeFromUI = (user) => {\r\n        const { account_role } = user;\r\n        switch (account_role) {\r\n            case \"su\":\r\n                const newSus = sus.filter((su) => su.credential_string != user.credential_string);\r\n                setSus( [...newSus] )\r\n                break;\r\n\r\n            case \"admin\":\r\n                const newAdmins = admins.filter((admin) => admin.credential_string != user.credential_string);\r\n                setAdmins( [...newAdmins] )\r\n                break;\r\n            default:\r\n                const newUsers = users.filter((u) => u.credential_string != user.credential_string);\r\n                setUsers( [...newUsers] )\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"fixed-default fullscreen main-bg overflow flex flex-no-wrap\">\r\n            <Navbar urls={ urls } bottomUrls={ bottomUrls } />\r\n            <div className={`app fixed-default overflow ${ !navState ? \"app-stretch\": \"app-scaled\" }`} style={{ height: \"100vh\" }}>\r\n                <Horizon />\r\n                <AddUserBox userAdd={ userAdd } setUserAdd = { setUserAdd } setUsers = { userSplitter }/>\r\n                <div className=\"p-1\">\r\n\r\n                    {/* SEARCH BAR */}\r\n\r\n                    <div className=\"w-100-pct bg-white p-1\">\r\n                        <div className=\"flex flex-no-wrap\">\r\n                            <div className=\"w-100-pct flex flex-no-wrap\">\r\n                                <div className=\"w-24-px flex flex-middle\">\r\n                                    <img src=\"/assets/icon/search.png\" className=\"w-100-pct block\"/>\r\n                                </div>\r\n                                <input className=\"no-border w-100-pct p-l-2\" placeholder=\"Tìm kiếm ai đó...\"/>\r\n                            </div>\r\n                            <div className=\"ml-auto\">\r\n                                <button onClick={ () => { setUserAdd(true) } } className=\"upper pointer block w-max-content white text-center p-t-0-5 p-b-0-5 p-l-1 p-r-1 no-border bg-green\">Thêm mới</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <UsersMapper label={ \"Super Users ( su )\" } users = { sus } removeFromUI = { removeFromUI }/>\r\n                    <UsersMapper label={ \"Quản trị viên ( admin )\" } users = { admins } removeFromUI = { removeFromUI }/>\r\n                    <UsersMapper label={ \"Người dùng ( user )\" } users = { users } removeFromUI = { removeFromUI }/>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}