{"ast":null,"code":"import _objectSpread from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Nhan/DIPE_V2/Client/DIPE/APP/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{useSelector}from'react-redux';import APP_API from'../../APP_API';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default(function(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),auth=_useState2[0],setAuth=_useState2[1];var _useSelector=useSelector(function(state){return state;}),unique_string=_useSelector.unique_string;var enterTriggered=function enterTriggered(e){if(e.keyCode===13){submit();}};var submit=function submit(){fetch(\"\".concat(APP_API,\"/\").concat(unique_string,\"/login\"),{method:\"post\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(auth)}).then(function(res){return res.json();}).then(function(resp){var success=resp.success,role=resp.role,credential_string=resp.credential_string,_token=resp._token;console.log(resp);if(success){localStorage.setItem('role',role);localStorage.setItem('credential_string',credential_string);localStorage.setItem('_token',_token);window.location='/';}else{alert(\"CREDENTIAL ERROR\");}});};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed-default flex flex-aligned fullscreen login-bg overflow\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-middle mg-auto login-form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-60-pct mg-auto\",style:{paddingLeft:\"3em\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"block text-center upper text-20-px\",children:\"\\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-90-pct mg-auto m-t-5 flex flex-no-wrap flex-middle\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"T\\xE0i kho\\u1EA3n\",onKeyUp:enterTriggered,onChange:function onChange(e){setAuth(_objectSpread(_objectSpread({},auth),{},{account_string:e.target.value}));},type:\"text\",className:\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-90-pct mg-auto m-t-1 flex flex-no-wrap flex-middle\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"M\\u1EADt kh\\u1EA9u\",onKeyUp:enterTriggered,onChange:function onChange(e){setAuth(_objectSpread(_objectSpread({},auth),{},{pwd_string:e.target.value}));},type:\"password\",className:\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-90-pct mg-auto m-t-1 flex flex-no-wrap\",children:/*#__PURE__*/_jsx(\"button\",{className:\"sign-btn w-100-pct pointer\",onClick:submit,children:\"Ti\\u1EBFp t\\u1EE5c \\u27A4\"})})]})]})})});});","map":{"version":3,"names":["useState","useEffect","useSelector","APP_API","auth","setAuth","state","unique_string","enterTriggered","e","keyCode","submit","fetch","method","headers","body","JSON","stringify","then","res","json","resp","success","role","credential_string","_token","console","log","localStorage","setItem","window","location","alert","paddingLeft","account_string","target","value","pwd_string"],"sources":["D:/Nhan/DIPE_V2/Client/DIPE/APP/src/cpn/auth/login.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport APP_API from '../../APP_API';\r\n\r\nexport default () => {\r\n    const [ auth, setAuth ] = useState({})\r\n\r\n    const { unique_string } = useSelector( state => state )\r\n\r\n    const enterTriggered = (e) => {\r\n        if( e.keyCode === 13 ){\r\n            submit()\r\n        }\r\n    }\r\n\r\n    const submit = () => {\r\n        fetch(`${APP_API}/${ unique_string }/login`, {\r\n            method: \"post\",\r\n            headers: {\r\n                \"content-type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(auth)\r\n        }).then( res => res.json() ).then( ( resp ) => {\r\n            const { success, role, credential_string, _token } = resp;\r\n            console.log( resp )\r\n            if( success ){\r\n                localStorage.setItem( 'role', role )\r\n                localStorage.setItem( 'credential_string', credential_string )\r\n                localStorage.setItem( '_token', _token )\r\n                window.location = '/';\r\n            }else{\r\n                alert(`CREDENTIAL ERROR`);\r\n            }\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div className=\"fixed-default flex flex-aligned fullscreen login-bg overflow\">\r\n            <div className=\"flex flex-middle mg-auto login-form\">\r\n                <div className=\"w-60-pct mg-auto\" style={{ paddingLeft: \"3em\" }}>\r\n                    <span className=\"block text-center upper text-20-px\">Đăng nhập</span>\r\n                    <div className=\"flex flex-wrap\">\r\n                        <div className=\"w-90-pct mg-auto m-t-5 flex flex-no-wrap flex-middle\">\r\n                            <input placeholder=\"Tài khoản\" onKeyUp={ enterTriggered } onChange={ (e) => { setAuth( { ...auth, account_string: e.target.value } ) } } type=\"text\" className=\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"/>\r\n                        </div>\r\n                        <div className=\"w-90-pct mg-auto m-t-1 flex flex-no-wrap flex-middle\">\r\n                            <input  placeholder=\"Mật khẩu\" onKeyUp={ enterTriggered } onChange={ (e) => { setAuth( { ...auth, pwd_string: e.target.value } ) } } type=\"password\" className=\"block w-100-pct ml-auto border-radius-12-px border-1 p-0-5\"/>\r\n                        </div>\r\n                        <div className=\"w-90-pct mg-auto m-t-1 flex flex-no-wrap\">\r\n                            <button className=\"sign-btn w-100-pct pointer\" onClick={ submit }>Tiếp tục ➤</button>\r\n                         </div>\r\n                        {/*<div className=\"w-90-pct mg-auto m-t-5 flex flex-no-wrap flex-middle\">\r\n                            <span className=\"block text-12-px text-right\">Khum có tài khoản ? <a href=\"/signup\" className=\"no-underline mylan-color pointer bold\">Đăng ký</a> ngay</span>\r\n                        </div> */}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"mappings":"yOAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,aAAa,CAEzC,MAAOC,QAAO,KAAM,eAAe,CAAC,wFAEpC,eAAe,UAAM,CACjB,cAA0BH,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA9BI,IAAI,eAAEC,OAAO,eAErB,iBAA0BH,WAAW,CAAE,SAAAI,KAAK,QAAIA,MAAK,GAAE,CAA/CC,aAAa,cAAbA,aAAa,CAErB,GAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAIC,CAAC,CAAK,CAC1B,GAAIA,CAAC,CAACC,OAAO,GAAK,EAAE,CAAE,CAClBC,MAAM,EAAE,CACZ,CACJ,CAAC,CAED,GAAMA,OAAM,CAAG,QAATA,OAAM,EAAS,CACjBC,KAAK,WAAIT,OAAO,aAAKI,aAAa,WAAW,CACzCM,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACb,IAAI,CAC7B,CAAC,CAAC,CAACc,IAAI,CAAE,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAI,EAAE,GAAE,CAACF,IAAI,CAAE,SAAEG,IAAI,CAAM,CAC3C,GAAQC,QAAO,CAAsCD,IAAI,CAAjDC,OAAO,CAAEC,IAAI,CAAgCF,IAAI,CAAxCE,IAAI,CAAEC,iBAAiB,CAAaH,IAAI,CAAlCG,iBAAiB,CAAEC,MAAM,CAAKJ,IAAI,CAAfI,MAAM,CAChDC,OAAO,CAACC,GAAG,CAAEN,IAAI,CAAE,CACnB,GAAIC,OAAO,CAAE,CACTM,YAAY,CAACC,OAAO,CAAE,MAAM,CAAEN,IAAI,CAAE,CACpCK,YAAY,CAACC,OAAO,CAAE,mBAAmB,CAAEL,iBAAiB,CAAE,CAC9DI,YAAY,CAACC,OAAO,CAAE,QAAQ,CAAEJ,MAAM,CAAE,CACxCK,MAAM,CAACC,QAAQ,CAAG,GAAG,CACzB,CAAC,IAAI,CACDC,KAAK,oBAAoB,CAC7B,CACJ,CAAC,CAAC,CACN,CAAC,CAED,mBACI,YAAK,SAAS,CAAC,8DAA8D,uBACzE,YAAK,SAAS,CAAC,qCAAqC,uBAChD,aAAK,SAAS,CAAC,kBAAkB,CAAC,KAAK,CAAE,CAAEC,WAAW,CAAE,KAAM,CAAE,wBAC5D,aAAM,SAAS,CAAC,oCAAoC,UAAC,0BAAS,EAAO,cACrE,aAAK,SAAS,CAAC,gBAAgB,wBAC3B,YAAK,SAAS,CAAC,sDAAsD,uBACjE,cAAO,WAAW,CAAC,mBAAW,CAAC,OAAO,CAAGzB,cAAgB,CAAC,QAAQ,CAAG,kBAACC,CAAC,CAAK,CAAEJ,OAAO,gCAAOD,IAAI,MAAE8B,cAAc,CAAEzB,CAAC,CAAC0B,MAAM,CAACC,KAAK,GAAI,CAAC,CAAG,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,4DAA4D,EAAE,EAC3N,cACN,YAAK,SAAS,CAAC,sDAAsD,uBACjE,cAAQ,WAAW,CAAC,oBAAU,CAAC,OAAO,CAAG5B,cAAgB,CAAC,QAAQ,CAAG,kBAACC,CAAC,CAAK,CAAEJ,OAAO,gCAAOD,IAAI,MAAEiC,UAAU,CAAE5B,CAAC,CAAC0B,MAAM,CAACC,KAAK,GAAI,CAAC,CAAG,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,4DAA4D,EAAE,EAC3N,cACN,YAAK,SAAS,CAAC,0CAA0C,uBACrD,eAAQ,SAAS,CAAC,4BAA4B,CAAC,OAAO,CAAGzB,MAAQ,UAAC,2BAAU,EAAS,EAClF,GAIL,GACJ,EACJ,EACJ,CAEd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}